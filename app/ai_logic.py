import json
from datetime import datetime
import os # For environment variables
import re

try:
    import google.generativeai as genai
except ImportError:
    genai = None

try:
    import openai
except ImportError:
    openai = None

# --- Configure AI APIs ---
GEMINI_API_KEY = os.getenv("GEMINI_API_KEY", "")
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "")

# Initialize AI providers
gemini_model = None
openai_client = None
current_ai_provider = None

# Try Gemini first
if GEMINI_API_KEY.strip() and genai is not None:
    try:
        genai.configure(api_key=GEMINI_API_KEY)
        gemini_model = genai.GenerativeModel('gemini-2.0-flash')
        current_ai_provider = "gemini"
        print("V1: Gemini AI initialized successfully")
    except Exception as e:
        print(f"V1: Failed to initialize Gemini: {e}")

# Try OpenAI as fallback
if current_ai_provider is None and OPENAI_API_KEY.strip() and openai is not None:
    try:
        openai_client = openai.OpenAI(api_key=OPENAI_API_KEY)
        # Test connection
        test_response = openai_client.chat.completions.create(
            model="gpt-4o-mini",
            messages=[{"role": "user", "content": "test"}],
            max_tokens=5
        )
        current_ai_provider = "openai"
        print("V1: OpenAI GPT-4 initialized successfully")
    except Exception as e:
        print(f"V1: Failed to initialize OpenAI: {e}")

if current_ai_provider is None:
    print("Warning: No AI provider available in V1. AI evaluation will use fallback scoring.")

# --- Scoring and Weightage Data ---
# These weights are fixed for the scoring logic.
# The 'assignedScore', 'explanation', and 'assumptions' will be dynamically generated by AI.

CLUSTER_WEIGHTS = {
  'Core Idea & Innovation': 0.20,
  'Market & Commercial Opportunity': 0.25,
  'Execution & Operations': 0.15,
  'Business Model & Strategy': 0.15,
  'Team & Organizational Health': 0.10,
  'External Environment & Compliance': 0.10,
  'Risk & Future Outlook': 0.05,
}

PARAMETER_WEIGHTS = {
  'Core Idea & Innovation': {
    'Novelty & Uniqueness': 0.30,
    'Problem-Solution Fit & Market Need': 0.45,
    'User Experience (UX) & Usability Potential': 0.25,
  },
  'Market & Commercial Opportunity': {
    'Market Validation': 0.40,
    'Geographic Specificity (India)': 0.30,
    'Product-Market Fit': 0.30,
  },
  'Execution & Operations': {
    'Technical Feasibility': 0.40,
    'Operational Viability': 0.30,
    'Scalability Potential': 0.30,
  },
  'Business Model & Strategy': {
    'Financial Viability': 0.60,
    'Defensibility': 0.40,
  },
  'Team & Organizational Health': {
    'Founder-Fit': 0.60,
    'Culture/Values': 0.40,
  },
  'External Environment & Compliance': {
    'Regulatory (India)': 0.40,
    'Sustainability (ESG)': 0.30,
    'Ecosystem Support (India)': 0.30,
  },
  'Risk & Future Outlook': {
    'Risk Assessment': 0.40,
    'Investor Attractiveness': 0.30,
    'Academic/National Alignment': 0.30,
  },
}

# --- Detailed Sub-Parameter Definitions (for AI prompting and report generation) ---
# Augmented with all the static content from the PDF template.
SUB_PARAMETER_DEFINITIONS = {
  'Core Idea & Innovation': {
    'purpose': 'To assess the fundamental strength, originality, and problem-solving capability of the idea.',
    'Novelty & Uniqueness': {
      'common_terminologies': 'Innovation, Uniqueness, Distinctiveness, USP',
      'Originality': {
        'weight': 0.60,
        'common_terminologies': 'Unique Idea, Inventiveness, Newness, Disruptiveness',
        'objective': 'To determine if the core idea is genuinely new, a significant improvement, or a disruptive concept compared to existing solutions globally.',
        'analysis_steps': [
            'Prior Art Search: Conduct extensive searches for existing patents, academic research, and commercial products addressing similar problems or using similar technologies.',
            'Concept Mapping: Create a visual map of the current market, positioning existing solutions based on their features, target audience, and underlying technology.',
            'Gap Identification: Pinpoint white spaces, unmet needs, or inefficiencies that the proposed idea uniquely addresses.',
            'Disruptive Potential Assessment: Evaluate if the idea could fundamentally change existing industries or create entirely new markets (e.g., "blue ocean").'
        ],
        'methods': 'Blue Ocean Strategy, TRIZ (Theory of Inventive Problem Solving), Design Thinking (Ideation Phase).',
        'data_required': 'Patent applications (granted/pending), academic papers, competitor product features, market reports on emerging technologies.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the degree of novelty (e.g., 5=truly disruptive, 1=minor iteration).',
            'Novelty Index: (Number of truly unique features / Total features) - Conceptual, often qualitative.'
        ],
        'assumptions_template': [
            'The mentor has access to comprehensive search tools and databases.',
            'The innovator has provided a clear and detailed description of their idea.'
        ],
        'example_table': {
            'headers': ['Feature/Aspect', 'Existing Solutions (Competitor X, Y)', 'Pragati AI (Your Idea)', 'Uniqueness/Novelty Level', 'Score (1-5)'],
            'rows': [
                ['[Core Function 1]', '[How competitors do it]', '[How your idea does it]', '[Unique/Minor Improvement/Same]', '[Score]'],
                ['[Core Function 2]', '[How competitors do it]', '[How your idea does it]', '[Unique/Minor Improvement/Same]', '[Score]'],
                ['[Overall Concept]', '[Closest existing concept]', '[Your idea\'s overall concept]', '[Truly novel/Significant advancement/Slightly different]', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Further explore truly novel approaches to [problem area] or pivot to a more unique angle.',
            'high': 'Consider IP protection strategies immediately to safeguard this originality.'
        },
        'mentor_insights_notes': '[Space for mentor\'s qualitative observations, gut feeling, and specific examples.]'
      },
      'Differentiation': {
        'weight': 0.40,
        'common_terminologies': 'Competitive Advantage, Unique Selling Proposition (USP), Market Position, Value Proposition',
        'objective': 'To identify how the proposed solution stands out from direct and indirect competitors, highlighting its unique selling propositions (USPs).',
        'analysis_steps': [
            'Competitor Identification: List all direct (solving the same problem, same way) and indirect (solving the same problem, different way) competitors.',
            'Competitor Analysis: For each competitor, detail their key features, pricing, target audience, marketing strategies, strengths, and weaknesses.',
            'USP Definition: Clearly articulate what makes Pragati AI superior or different in a way that matters to the customer.',
            'Competitive Matrix/Map: Visually plot Pragati AI against competitors based on key differentiating factors.'
        ],
        'methods': 'Porter\'s Five Forces, SWOT Analysis, Value Proposition Canvas.',
        'data_required': 'Competitor feature lists, pricing models, customer reviews, marketing claims, investor decks (if public).',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the strength and sustainability of differentiation.'
        ],
        'assumptions_template': [
            'Competitor information gathered is accurate and up-to-date.',
            'The identified USPs are genuinely perceived as valuable by the target market.'
        ],
        'example_table': {
            'headers': ['Competitor', 'Key Features', 'Pricing Model', 'Target Audience', 'Pragati AI\'s Advantage Over This Competitor', 'Score (1-5)'],
            'rows': [
                ['[Competitor A]', '[Feature Set]', '[Pricing]', '[Audience]', '[Specific advantage 1]', '[Score]'],
                ['[Competitor B]', '[Feature Set]', '[Pricing]', '[Audience]', '[Specific advantage 2]', '[Score]'],
                ['Pragati AI', '[Your Feature Set]', '[Your Pricing]', '[Your Audience]', 'Overall Differentiation Statement: [Concise statement]', '[Overall Score]']
            ]
        },
        'recommendations': {
            'weak': 'Refine your value proposition to highlight unique benefits that resonate deeply with customers.',
            'strong': 'Develop clear messaging and marketing campaigns that emphasize your unique differentiators.'
        },
        'mentor_insights_notes': '[Space for mentor\'s qualitative observations, e.g., "Differentiation seems strong on scalability, but human touch is a challenge."]'
      },
    },
    'Problem-Solution Fit & Market Need': {
      'common_terminologies': 'Customer Needs, Pain Points, Value Proposition, Market Demand, Problem Validation',
      'Problem Clarity & Severity': {
        'weight': 0.20,
        'common_terminologies': 'User Pain, Market Need, Urgency, Problem Validation',
        'objective': 'To gauge the intensity and prevalence of the problem being addressed for the target users/customers.',
        'analysis_steps': [
            'Target User Definition: Clearly define the specific demographic, professional role, and context of the primary target users.',
            'Problem Statement Validation: Articulate the problem in the user\'s words.',
            'Quantify Severity: Gather data on how widespread the problem is, how frequently it occurs, and its measurable impact (time, cost, frustration).',
            'Urgency Assessment: Determine how urgently users need a solution and if they are actively seeking one.'
        ],
        'methods': 'Customer Discovery (Lean Startup): Conduct problem interviews. Jobs-to-Be-Done (JTBD) Framework: Understand the underlying "job" the customer is trying to get done. Empathy Mapping: Visualize user needs, pains, gains.',
        'data_required': 'User interview transcripts, survey responses (quantitative on pain points), industry reports on challenges faced by target demographic.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on problem clarity, prevalence, and impact.',
            'Problem Frequency: (e.g., "X times per week/month").',
            'Estimated Lost Time/Money: (e.g., "Students spend Y hours/week on non-core research tasks due to lack of guidance").',
            'Survey Data: % of target users experiencing the problem; Average severity rating (1-5).'
        ],
        'assumptions_template': [
            'User feedback collected is representative of the target audience.',
            'Innovator has genuinely listened to and understood the user\'s perspective.'
        ],
        'example_table': {
            'headers': ['Problem Aspect', 'User Feedback/Observation', 'Frequency', 'Impact (Time/Cost/Emotion)', 'Severity Score (1-5)'],
            'rows': [
                ['Clarity', '[User quote/summary]', '[e.g., Daily]', '[e.g., 2 hrs/week lost]', '[Score]'],
                ['Urgency', '[User quote/summary]', '[e.g., High]', '[e.g., High frustration]', '[Score]'],
                ['Prevalence', '[Survey data]', '[e.g., 70% of target]', '[e.g., Significant]', '[Score]'],
                ['Overall Problem:', '[Concise problem statement]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Conduct more in-depth customer discovery to identify a truly painful problem.',
            'high': 'Ensure your messaging clearly articulates this severe problem to resonate with potential users.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The problem of research guidance is clear, but its severity for *AI-specific* solutions needs more depth."]'
      },
      'Target Audience Identification & Definition': {
        'weight': 0.15,
        'common_terminologies': 'Demographic, Persona, User Segment, Ideal Customer Profile',
        'objective': 'To clearly define the specific demographic, professional role, and context of the primary target users.',
        'analysis_steps': [
            'Segmentation: Divide the broad market into distinct groups based on demographics, psychographics, behavior, and needs.',
            'Persona Development: Create detailed profiles of ideal users, including their goals, pain points, motivations, and daily routines.',
            'Market Sizing for Segments: Estimate the size of each identified target segment.',
            'Validation: Confirm that the chosen segments are accessible and willing to engage with the solution.'
        ],
        'methods': 'Market Segmentation, Persona Development, Customer Journey Mapping.',
        'data_required': 'Demographic data, user research, market reports, competitor target audience analysis.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on clarity and precision of target audience definition.',
            'Segment Size: Estimated number of users in the defined segment.',
            'Accessibility: Ease of reaching the target audience (e.g., via existing channels).'
        ],
        'assumptions_template': [
            'The market research accurately reflects the characteristics of the target audience.',
            'The innovator has a clear understanding of who their primary user is.'
        ],
        'example_table': {
            'headers': ['Aspect', 'Description/Metric', 'Assessment (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Demographic', '[e.g., University students, age 18-24]', '[High]', '[Score]'],
                ['Role/Context', '[e.g., Engineering students working on final year projects]', '[High]', '[Score]'],
                ['Pain Points', '[e.g., Difficulty finding relevant research papers]', '[High]', '[Score]'],
                ['Overall Definition', '[Concise summary of target audience]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Narrow down your target audience to a more specific niche for clearer focus and validation.',
            'high': 'Develop tailored marketing messages for each key persona to maximize resonance.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Focusing on a specific department or year group initially could provide clearer validation."]'
      },
      'Customer Pain Points Validation': {
        'weight': 0.20,
        'common_terminologies': 'Problem Validation, User Needs, Unmet Needs, Problem-Solution Fit',
        'objective': 'To validate that the identified pain points are genuinely experienced and severe enough for customers to seek and pay for a solution.',
        'analysis_steps': [
            'Problem Interviews: Conduct structured interviews with potential users to explore their current challenges and frustrations related to the problem area.',
            'Surveys: Distribute surveys to a larger audience to quantify the prevalence and severity of identified pain points.',
            'Observation: Observe potential users in their natural environment to identify unarticulated pain points or inefficiencies.',
            'Competitive Analysis: Understand how existing solutions (or workarounds) fail to fully address these pains.'
        ],
        'methods': 'Customer Interviews, Surveys, Market Research, Jobs-to-Be-Done (JTBD) Framework.',
        'data_required': 'Specific validation data (e.g., user willingness to pay, current workarounds, emotional impact of pain points).',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the depth of pain point validation.',
            'Frequency of Pain: How often users encounter the problem (e.g., daily, weekly).',
            'Impact of Pain: Quantifiable impact (time lost, money spent, emotional distress).',
            'Current Workarounds: How users currently cope with the pain point, indicating its severity.'
        ],
        'assumptions_template': [
            'Users are honest and articulate in expressing their pain points.',
            'The identified pain points are widespread enough to support a viable business.'
        ],
        'example_table': {
            'headers': ['Pain Point', 'Evidence (User Quote/Data)', 'Severity (1-5)', 'Frequency', 'Score (1-5)'],
            'rows': [
                ['Finding relevant research', '[Quote: "I spend hours just searching..."]', '[4]', '[Daily]', '[Score]'],
                ['Structuring thesis', '[Survey: 60% struggle with structure]', '[3]', '[Weekly]', '[Score]'],
                ['Overall Pain Points', '[Summary of validated pains]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-validate your core problem with more direct customer interviews to ensure it is a "hair-on-fire" problem.',
            'high': 'Use the validated pain points to craft compelling marketing messages that resonate deeply with your target audience.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The pain of navigating vast academic databases is real, but the AI\'s solution needs to be demonstrably better than existing search tools."]'
      },
      'Solution Efficacy': {
        'weight': 0.20,
        'common_terminologies': 'Effectiveness, Problem Solving, Value Delivery, Impact, Solution Validation',
        'objective': 'To evaluate how well the proposed product or service truly solves the identified problem, meeting user needs and expectations.',
        'analysis_steps': [
            'Define Success Metrics: Establish clear KPIs that indicate the solution is effectively solving the problem (e.g., time saved, accuracy improved, user satisfaction).',
            'Solution Validation: Conduct interviews or surveys with target users, presenting the proposed solution (mock-ups, prototypes, MVP).',
            'Pilot Testing: Deploy an MVP to a small group of users and collect real-world usage data and feedback.',
            'Impact Measurement: Measure observed impact against predefined KPIs.'
        ],
        'methods': 'Usability Testing, A/B Testing, NPS (Net Promoter Score), Solution Interview Techniques.',
        'data_required': 'User feedback from pilot tests, usage analytics, survey results on satisfaction, before-and-after metrics (e.g., time taken for a task).',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on how well the solution addresses the problem.',
            '% of Users Achieving Desired Outcome: (e.g., "80% of students found the AI\'s research summary helpful").',
            '% Reduction in Time/Effort: (e.g., "AI reduced literature review time by 30%").',
            'User Satisfaction Scores: (e.g., Average rating on a 1-5 scale).'
        ],
        'assumptions_template': [
            'The pilot test environment accurately reflects real-world usage.',
            'Users are providing honest and constructive feedback.'
        ],
        'example_table': {
            'headers': ['Metric/KPI', 'Baseline (Without Solution)', 'Pilot Results (With Solution)', '% Change/Improvement', 'Score (1-5)'],
            'rows': [
                ['Time for Task X', '[e.g., 5 hours]', '[e.g., 3 hours]', '[e.g., 40% reduction]', '[Score]'],
                ['Accuracy of Output', '[e.g., 70%]', '[e.g., 90%]', '[e.g., 20% increase]', '[Score]'],
                ['User Satisfaction', '[N/A]', '[e.g., 4.2/5]', '[N/A]', '[Score]'],
                ['Overall Efficacy:', '[Summary of how well it solves problem]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-evaluate core solution features based on user feedback and iterate rapidly.',
            'high': 'Focus on communicating the proven impact to potential users and investors.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI\'s ability to summarize complex research papers is a strong feature, but it needs to handle diverse academic fields."]'
      },
      'Customer Willingness to Pay': {
        'weight': 0.15,
        'common_terminologies': 'Pricing Sensitivity, Value Perception, Monetization Potential, Revenue Model',
        'objective': 'To assess the target customers\' readiness and ability to pay for the proposed solution.',
        'analysis_steps': [
            'Pricing Research: Investigate pricing models of existing alternatives (both direct and indirect competitors).',
            'Value Perception Analysis: Understand how much value users perceive from the solution compared to its cost.',
            'Pricing Surveys/Interviews: Directly ask potential customers about their willingness to pay for specific features or tiers.',
            'Market Segmentation for Pricing: Identify if different segments have different willingness-to-pay thresholds.'
        ],
        'methods': 'Value-Based Pricing, Conjoint Analysis, Pricing Surveys, Van Westendorp Price Sensitivity Meter.',
        'data_required': 'Market research on budget constraints, competitor pricing, perceived value, user income levels.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the confidence in customer\'s willingness to pay.',
            'Price Point Acceptance: % of users willing to pay at a specific price point.',
            'Perceived Value vs. Cost: User ratings on whether value outweighs cost.',
            'Average Revenue Per User (ARPU) Potential: Estimated revenue per user per period.'
        ],
        'assumptions_template': [
            'The target market has the financial capacity to pay for the service.',
            'The value proposition is clearly communicated and understood by potential customers.'
        ],
        'example_table': {
            'headers': ['Pricing Model', 'Proposed Price', 'Target Segment', 'Willingness to Pay (1-5)', 'Score (1-5)'],
            'rows': [
                ['Freemium', '[N/A]', '[All]', '[4]', '[Score]'],
                ['Subscription', '[e.g., INR 500/month]', '[Students/Researchers]', '[3]', '[Score]'],
                ['Institutional License', '[e.g., INR 50,000/year]', '[Colleges]', '[4]', '[Score]'],
                ['Overall Willingness', '[Summary of pricing outlook]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-evaluate pricing strategy; consider a freemium model or lower entry price points to build adoption.',
            'high': 'Develop clear value-based pricing tiers that align with different user needs and budgets.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Students might be price-sensitive, so a freemium model with premium features for institutions could work."]'
      },
      'Jobs-to-Be-Done (JTBD) Alignment': {
        'weight': 0.10,
        'common_terminologies': 'Customer Jobs, Functional Jobs, Emotional Jobs, Social Jobs, Outcome-Driven Innovation',
        'objective': 'To ensure the solution aligns with the fundamental "jobs" customers are trying to get done, including functional, emotional, and social aspects.',
        'analysis_steps': [
            'JTBD Interviews: Conduct interviews focused on understanding what "job" customers are hiring a product/service to do, not just their problems.',
            'Job Mapping: Document the steps customers go through to get a job done, identifying opportunities for improvement.',
            'Outcome Identification: Uncover the desired outcomes customers seek when performing a job.',
            'Solution Mapping: Map how the proposed solution helps customers get their jobs done better, faster, or more cheaply.'
        ],
        'methods': 'JTBD Interviews, Outcome-Driven Innovation, Customer Journey Mapping.',
        'data_required': 'User stories, customer journey maps, qualitative insights into user motivations, competitor analysis from a JTBD perspective.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the depth of JTBD alignment.',
            '% of User Jobs Addressed: How many of the identified "jobs" the solution helps with.',
            'Improvement Metrics: How much better, faster, or cheaper the job can be done with the solution.'
        ],
        'assumptions_template': [
            'The innovator has a deep understanding of the underlying motivations and context of their users.',
            'The solution addresses a core, recurring "job" for the target audience.'
        ],
        'example_table': {
            'headers': ['Job-to-Be-Done', 'Current Solution/Workaround', 'Pragati AI Solution', 'Alignment Level (1-5)', 'Score (1-5)'],
            'rows': [
                ['"Get my research paper published quickly"', '[Manual search, inconsistent feedback]', '[AI-guided literature review, formatting, grammar checks]', '[4]', '[Score]'],
                ['"Feel confident about my startup idea"', '[Informal advice, self-doubt]', '[Structured validation report, clear recommendations]', '[5]', '[Score]'],
                ['Overall JTBD Alignment', '[Summary of how well it aligns]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Revisit your understanding of customer "jobs" beyond just surface-level problems; focus on the deeper motivations.',
            'high': 'Emphasize how your solution helps users achieve their fundamental "jobs" in your marketing and product development.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The core job for students is often to "get good grades" or "complete projects efficiently," which the AI can directly support."]'
      },
    },
    'User Experience (UX) & Usability Potential': {
      'common_terminologies': 'User-Friendly, Ease of Learning, UX Design, Navigation, User Flow',
      'Intuitive Design': {
        'weight': 0.60,
        'common_terminologies': 'Ease of Use, Learnability, Efficiency, Satisfaction, User Interface (UI)',
        'objective': 'To assess how easy and natural it is for users to understand, learn, and interact with the product or service without extensive training.',
        'analysis_steps': [
            'Design Review: Conduct a thorough review of proposed UI/UX designs, wireframes, and prototypes.',
            'Heuristic Evaluation: Apply established usability heuristics to identify potential design flaws.',
            'User Testing (Early Stage): Conduct qualitative user tests with representative users to observe their interaction patterns and identify points of confusion.',
            'Cognitive Load Assessment: Evaluate how much mental effort is required for users to complete key tasks.'
        ],
        'methods': 'Nielsen\'s 10 Usability Heuristics, Gestalt Principles, Fitts\'s Law, Hick\'s Law, User-Centered Design (UCD).',
        'data_required': 'User test recordings, observer notes, user feedback on ease of use, task completion rates.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the predicted ease of use and learnability.',
            'Task Completion Rate: % of users who successfully complete key tasks.',
            'Time to Complete Task: Average time taken for users to complete a specific task.',
            'User Error Rate: Number of errors users make per task.'
        ],
        'assumptions_template': [
            'The initial UI/UX designs are representative of the final product.',
            'Users have a basic familiarity with digital interfaces.'
        ],
        'example_table': {
            'headers': ['Aspect', 'Observation/Metric', 'Score (1-5)'],
            'rows': [
                ['Learnability', '[e.g., Users understood core functions within 5 mins]', '[Score]'],
                ['Efficiency', '[e.g., Tasks completed quickly with minimal clicks]', '[Score]'],
                ['Error Prevention', '[e.g., Few user errors observed]', '[Score]'],
                ['Overall Intuition:', '[Summary of ease of use]', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Invest in professional UX design and conduct extensive user testing early.',
            'high': 'Leverage this strength in marketing, emphasizing ease of use.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Conversational AI makes it intuitive, but complex features might require clearer guidance."]'
      },
      'Accessibility Compliance': {
        'weight': 0.40,
        'common_terminologies': 'Inclusive Design, WCAG, Disability Access, Universal Design',
        'objective': 'To ensure the product adheres to standards that make it usable by people with disabilities, promoting inclusivity and legal compliance.',
        'analysis_steps': [
            'Accessibility Audit: Conduct a systematic review of the product against Web Content Accessibility Guidelines (WCAG) or other relevant standards.',
            'Inclusive User Testing: Engage users with various disabilities to test the product and provide feedback.',
            'Policy Review: Examine internal policies and development practices to ensure accessibility is integrated from design to deployment.',
            'Assistive Technology Compatibility: Test compatibility with common assistive technologies (e.g., screen readers, keyboard navigation).'
        ],
        'methods': 'Web Content Accessibility Guidelines (WCAG), Universal Design Principles, Accessibility Audit Tools (Lighthouse, AXE).',
        'data_required': 'Accessibility audit reports, user feedback from inclusive testing, compliance checklists.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on level of compliance and inclusivity.',
            'Number of Accessibility Violations: (e.g., "5 critical violations identified").',
            '% of Features Compliant: (e.g., "80% of core features meet WCAG AA").'
        ],
        'assumptions_template': [
            'The development team has basic awareness of accessibility principles.',
            'Accessibility is considered from the design phase, not just as an afterthought.'
        ],
        'example_table': {
            'headers': ['WCAG Principle', 'Compliance Status (Yes/No/Partial)', 'Notes/Issues', 'Score (1-5)'],
            'rows': [
                ['Perceivable', '[Yes]', '[e.g., Good alt text]', '[Score]'],
                ['Operable', '[Partial]', '[e.g., Keyboard navigation issues]', '[Score]'],
                ['Understandable', '[Yes]', '[e.g., Clear instructions]', '[Score]'],
                ['Robust', '[Yes]', '[e.g., Compatible with assistive tech]', '[Score]'],
                ['Overall Compliance:', '[Summary of accessibility status]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Invest in professional accessibility audits and implement a roadmap for WCAG compliance.',
            'high': 'Highlight accessibility features as a key differentiator and commitment to inclusivity.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Crucial for a public-facing educational platform in India to be accessible to all."]'
      },
    },
  },
  'Market & Commercial Opportunity': {
    'purpose': 'To assess the size, attractiveness, and dynamics of the market the idea aims to penetrate.',
    'Market Validation': {
      'common_terminologies': 'Market Sizing, Competitive Analysis, Industry Trends, Demand Analysis',
      'Market Size (TAM)': {
        'weight': 0.60,
        'common_terminologies': 'Total Addressable Market (TAM), Serviceable Available Market (SAM), Serviceable Obtainable Market (SOM), Market Potential, Market Volume',
        'objective': 'To estimate the total potential revenue if 100% of the target market adopted the solution (TAM), the portion accessible (SAM), and the realistic share obtainable (SOM).',
        'analysis_steps': [
            'Define Market Boundaries: Clearly delineate the specific market segment(s) Pragati AI targets.',
            'TAM Calculation (Top-Down): Use broad industry data to estimate total market size.',
            'TAM Calculation (Bottom-Up): Estimate the number of potential customers and their average spend.',
            'SAM Calculation: Determine the portion of TAM accessible by current business model/channels/geography.',
            'SOM Calculation: Estimate the realistic share of SAM obtainable given competitive landscape and resources.'
        ],
        'methods': 'Market Sizing Methodologies (Top-Down, Bottom-Up), Market Segmentation.',
        'data_required': 'Demographic data (student/faculty population), education sector spending, innovation ecosystem size (startups, incubators), average spend on consultancy/support services.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the attractiveness of the market size.',
            'TAM (Total Addressable Market): Estimated total revenue if 100% market adoption.',
            'SAM (Serviceable Available Market): Portion of TAM accessible by current business model.',
            'SOM (Serviceable Obtainable Market): Realistic share of SAM obtainable.'
        ],
        'assumptions_template': [
            'The market data used for sizing is reliable and up-to-date.',
            'The assumptions about average spend per user are realistic.'
        ],
        'example_table': {
            'headers': ['Metric', 'Estimated Value', 'Rationale', 'Score (1-5)'],
            'rows': [
                ['TAM', '[e.g., $4 Billion / year]', '[Based on 40M students, INR 1000/year spend]', '[Score]'],
                ['SAM', '[e.g., $1 Billion / year]', '[25% of TAM accessible digitally]', '[Score]'],
                ['SOM', '[e.g., $50 Million / year]', '[5% of SAM in Year 3]', '[Score]'],
                ['Overall Score', '[Summary of market size attractiveness]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-evaluate the market definition or consider adjacent markets.',
            'high': 'Strengthen competitive advantage or refine go-to-market strategy to capture more share.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "While TAM is large, the SOM seems conservative, indicating strong competition or high customer acquisition costs."]'
      },
      'Competitive Intensity': {
        'weight': 0.40,
        'common_terminologies': 'Market Saturation, Competitor Analysis, Barriers to Entry, Competitive Landscape',
        'objective': 'To analyze the number, size, and aggressiveness of existing competitors in the market.',
        'analysis_steps': [
            'Competitor Mapping: Identify all direct (e.g., human consultancies, other AI platforms offering similar services) and indirect competitors (e.g., free online resources, generic LLMs).',
            'Competitive Analysis: For each competitor, evaluate their market share, strengths, weaknesses, pricing, and strategies.',
            'Barrier to Entry Assessment: Identify how difficult it is for new players to enter this market.',
            'Threat Level Assessment: Determine the overall threat posed by the competitive landscape.'
        ],
        'methods': 'Porter\'s Five Forces, SWOT Analysis, Competitor Matrix.',
        'data_required': 'Competitors\' market share data, revenue, funding rounds, product reviews, pricing structures, marketing campaigns.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the level of intensity (e.g., 5 = highly intense, fragmented; 1 = low intensity, few players).',
            'Number of Key Competitors: (e.g., "5 direct competitors, 10+ indirect").',
            'Market Concentration (e.g., HHI for mature markets).'
        ],
        'assumptions_template': [
            'Competitor data collected is reasonably accurate.',
            'Market dynamics are not expected to change drastically in the short term.'
        ],
        'example_table': {
            'headers': ['Competitor', 'Market Share (Est.)', 'Strengths', 'Weaknesses', 'Threat Level (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['[Competitor A]', '[e.g., 20%]', '[e.g., Strong brand]', '[e.g., High cost]', '[High]', '[Score]'],
                ['[Competitor B]', '[e.g., 15%]', '[e.g., Niche focus]', '[e.g., Limited scalability]', '[Medium]', '[Score]'],
                ['Overall Intensity:', '[Summary of competitive environment]', '', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'high_intensity': 'Develop a strong differentiation strategy to stand out in a crowded market.',
            'low_intensity': 'Focus on rapid market penetration and capturing early market share.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The market is fragmented with many small players, offering an opportunity for a scalable AI solution to consolidate."]'
      },
    },
    'Geographic Specificity (India)': {
      'common_terminologies': 'Local Market, Cultural Fit, Regional Nuances, India-Specific',
      'Regulatory Landscape': {
        'weight': 0.50,
        'common_terminologies': 'Legal Framework, Compliance Requirements, Government Policy, Local Laws',
        'objective': 'To understand the legal and policy environment in India that affects the project\'s operation, including licensing, data, and industry-specific laws.',
        'analysis_steps': [
            'Identify Relevant Laws: Research central and state-level laws pertaining to AI, data privacy (e.g., DPDP Act 2023), education technology, and general business operations in India.',
            'Compliance Assessment: Evaluate how Pragati AI\'s proposed operations align with these laws, identifying potential compliance gaps or hurdles.',
            'Future Regulatory Outlook: Monitor upcoming legislative changes or policy discussions that could impact the business.',
            'Licensing & Permits: Determine any specific licenses or permits required to operate an AI consultancy in the education/innovation sector.'
        ],
        'methods': 'Regulatory Compliance Checklist, Legal Due Diligence, Policy Analysis.',
        'data_required': 'Legal texts, government circulars, policy documents, industry association guidelines.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the complexity and favorability of the regulatory landscape.',
            'Number of Critical Compliance Gaps: (e.g., "2 major gaps identified").',
            'Ease of Obtaining Licenses: (e.g., "Moderate difficulty").'
        ],
        'assumptions_template': [
            'The innovator has access to legal expertise regarding Indian regulations.',
            'The regulatory environment is stable enough for long-term planning.'
        ],
        'example_table': {
            'headers': ['Law/Guideline', 'Key Requirement', 'Pragati AI Status', 'Risk Level (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Data Privacy (DPDP Act 2023)', '[e.g., Explicit consent]', '[e.g., Requires implementation]', '[High Risk]', '[Score]'],
                ['EdTech Guidelines (UGC)', '[e.g., Content standards]', '[e.g., Partially compliant]', '[Medium Risk]', '[Score]'],
                ['AI Ethics (NITI Aayog)', '[e.g., Bias mitigation]', '[e.g., Under review]', '[Medium Risk]', '[Score]'],
                ['Overall Regulatory Risk:', '[Summary of regulatory environment]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'high_risk': 'Engage legal counsel immediately to develop a robust compliance framework before launch.',
            'moderate_risk': 'Implement \'privacy by design\' principles and stay updated on evolving AI regulations.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The lack of specific AI laws creates ambiguity, but also an opportunity to shape standards."]'
      },
      'Infrastructure Readiness': {
        'weight': 0.50,
        'common_terminologies': 'Digital Infrastructure, Connectivity, Logistics, Payment Systems, Local Resources',
        'objective': 'To evaluate if the necessary physical and digital infrastructure is adequately developed in India to support the solution.',
        'analysis_steps': [
            'Digital Penetration Assessment: Evaluate internet penetration, smartphone ownership, and digital literacy rates among the target audience in India.',
            'Cloud Infrastructure Availability: Assess the presence and reliability of cloud service providers (AWS, Azure, GCP) with regional data centers in India.',
            'Payment Gateway Integration: Verify the availability and ease of integrating with popular Indian digital payment systems (UPI, wallets).',
            'Logistics/Physical Infrastructure (if applicable): For physical components, assess supply chain, delivery networks, etc.'
        ],
        'methods': 'PESTEL Analysis, Market Infrastructure Assessment, Digital Adoption Surveys.',
        'data_required': 'Internet penetration statistics, smartphone ownership rates, digital transaction volumes, cloud service provider presence in India, telecom operator reports.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the adequacy of infrastructure.',
            'Internet Penetration: % of target users with reliable internet access.',
            'Digital Payment Adoption: % of target users regularly using digital payment methods.',
            'Cost of Cloud Infrastructure: (e.g., "Indian cloud regions offer X% cost savings").'
        ],
        'assumptions_template': [
            'The current trends in digital adoption in India will continue.',
            'Infrastructure costs are manageable for the projected scale.'
        ],
        'example_table': {
            'headers': ['Infrastructure Aspect', 'Status in India', 'Impact on Pragati AI', 'Score (1-5)'],
            'rows': [
                ['Internet Penetration', '[e.g., High in urban, growing in rural]', '[Enables broad reach]', '[Score]'],
                ['Digital Payments', '[e.g., UPI widely adopted]', '[Facilitates transactions]', '[Score]'],
                ['Cloud Services', '[e.g., Major providers have local regions]', '[Ensures scalability, low latency]', '[Score]'],
                ['Overall Readiness:', '[Summary of infrastructure adequacy]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Identify and address specific infrastructure gaps or adapt the solution to low-resource environments.',
            'high': 'Leverage India\'s growing digital infrastructure to scale rapidly and efficiently.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "India\'s digital public goods are a huge advantage for online services."]'
      },
    },
    'Product-Market Fit': {
      'common_terminologies': 'User Adoption, Customer Satisfaction, Retention, Engagement Metrics',
      'User Engagement': {
        'weight': 0.50,
        'common_terminologies': 'Active Users, Retention, Stickiness, Usage Frequency, Interaction Rate',
        'objective': 'To predict how deeply and frequently users will interact with the product or service after initial adoption.',
        'analysis_steps': [
            'Define Engagement Metrics: Identify key metrics that reflect active and meaningful usage for Pragati AI (e.g., Daily Active Users (DAU), Monthly Active Users (MAU), session duration, feature adoption rates, number of queries per user).',
            'Pilot Data Collection: Implement tracking tools (analytics) within the platform to capture these metrics during pilot tests or early launch.',
            'User Flow Analysis: Map typical user journeys to identify points of friction or drop-off.',
            'Feedback Loop: Establish mechanisms to collect user feedback on engagement and satisfaction.'
        ],
        'methods': 'Product Analytics, Cohort Analysis, Hook Model (Nir Eyal), AARRR Funnel.',
        'data_required': 'User analytics reports, session logs, feature usage dashboards, user survey responses on satisfaction.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the predicted level of engagement.',
            'DAU/MAU Ratio: (Daily Active Users / Monthly Active Users) * 100%.',
            'Average Session Length: (e.g., "15 minutes per session").',
            'Frequency of Key Actions: (e.g., "Average 3 queries per user per week").',
            'Feature Adoption Rates: (e.g., "70% of users utilize the \'research summary\' feature").'
        ],
        'assumptions_template': [
            'The pilot user group is representative of the broader target market.',
            'The AI\'s performance remains consistent across users.'
        ],
        'example_table': {
            'headers': ['Metric', 'Baseline/Target', 'Pilot Results', 'Assessment (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['DAU/MAU', '[e.g., >30%]', '[e.g., 35%]', '[High]', '[Score]'],
                ['Avg. Session Duration', '[e.g., >10 min]', '[e.g., 12 min]', '[High]', '[Score]'],
                ['Key Feature Adoption', '[e.g., >60%]', '[e.g., 65%]', '[High]', '[Score]'],
                ['Overall Engagement:', '[Summary of engagement level]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Introduce gamification elements or stronger personalization to boost engagement.',
            'high': 'Focus on converting engaged users into loyal customers through premium features or community building.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI\'s ability to provide instant, relevant answers will be key to driving high engagement."]'
      },
      'Retention Potential': {
        'weight': 0.50,
        'common_terminologies': 'Customer Loyalty, Churn Rate, Repeat Usage, Customer Lifetime Value (CLTV)',
        'objective': 'To estimate the likelihood of users continuing to use the product over an extended period.',
        'analysis_steps': [
            'Define Churn: Clearly define what constitutes user churn (e.g., unsubscribing, no activity for X days).',
            'Churn Rate Tracking: Implement systems to track monthly or quarterly churn rates for user cohorts.',
            'Churn Analysis: Conduct exit interviews or surveys with churned users to understand the root causes of their departure.',
            'Customer Lifetime Value (CLTV) Estimation: Project the total revenue a customer is expected to generate over their relationship with Pragati AI.'
        ],
        'methods': 'Cohort Analysis, Customer Lifetime Value (CLTV) Modeling, Churn Analysis.',
        'data_required': 'Churn reports, user activity logs, feedback from churned users, average revenue per user (ARPU).',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the predicted retention likelihood.',
            'Monthly/Quarterly Churn Rate: % of users who stop using the service per period.',
            'Retention Rate: % of users who continue using the service over time.',
            'Estimated CLTV: Projected total revenue from a single customer over their lifespan.'
        ],
        'assumptions_template': [
            'The value proposition remains compelling over time.',
            'Customer support effectively resolves issues that might lead to churn.'
        ],
        'example_table': {
            'headers': ['Metric', 'Target', 'Pilot Results', 'Assessment (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Monthly Churn Rate', '[e.g., <5%]', '[e.g., 7%]', '[Moderate]', '[Score]'],
                ['Retention Rate (3-month)', '[e.g., >70%]', '[e.g., 60%]', '[Moderate]', '[Score]'],
                ['Estimated CLTV', '[e.g., >INR 5000]', '[e.g., INR 3000]', '[Moderate]', '[Score]'],
                ['Overall Retention:', '[Summary of retention outlook]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Implement proactive churn prevention strategies; enhance value proposition for long-term users.',
            'high': 'Focus on maximizing CLTV through upselling/cross-selling opportunities.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Retention will be challenging if AI doesn\'t continuously learn and provide fresh insights."]'
      },
    },
  },
  'Execution & Operations': {
    'purpose': 'To assess the practical ability to build, launch, and operate the idea effectively and efficiently.',
    'Technical Feasibility': {
      'common_terminologies': 'Tech Stack, Development Capabilities, System Architecture, Performance, Engineering',
      'Technology Maturity': {
        'weight': 0.50,
        'common_terminologies': 'TRL, Technology Risk, Innovation Readiness, Proven Tech',
        'objective': 'To assess the stability, reliability, and widespread adoption of the core technologies proposed for the solution, and identify associated R&D risks.',
        'analysis_steps': [
            'Technology Stack Review: List all core technologies (AI models, programming languages, databases, cloud services) and assess their current maturity levels.',
            'TRL Assessment: Apply the Technology Readiness Level (TRL) scale to key components to gauge their development stage.',
            'Vendor/Open-Source Evaluation: Research the stability, support, and long-term viability of chosen tech stack elements.',
            'Identify R&D Roadblocks: Pinpoint any unproven components or significant R&D challenges requiring substantial investment/time.'
        ],
        'methods': 'Technology Readiness Level (TRL) Scale, Risk Assessment Matrix, Due Diligence on Tech Components.',
        'data_required': 'Vendor documentation, open-source project maturity (GitHub stars, commit activity), academic papers on technology advancements, expert opinions.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on overall maturity and risk.',
            'Average TRL: (e.g., "Average TRL of core AI components is 7").',
            '% of Tech Stack on Mature Components: (e.g., "80% uses open-source, production-ready libraries").'
        ],
        'assumptions_template': [
            'The development team has sufficient expertise in the chosen technologies.',
            'Required AI models and data are accessible or can be developed within reasonable timeframes.'
        ],
        'example_table': {
            'headers': ['Technology Component', 'Maturity Level (TRL)', 'Risk Assessment (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Core AI Model', '[e.g., TRL 6-7]', '[Medium]', '[Score]'],
                ['Cloud Platform', '[e.g., TRL 9]', '[Low]', '[Score]'],
                ['Data Processing Pipeline', '[e.g., TRL 5]', '[Medium]', '[Score]'],
                ['Overall Maturity:', '[Summary of tech stack maturity]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Prioritize de-risking unproven technologies; consider using more mature components.',
            'high': 'Leverage mature components to accelerate development; focus R&D on proprietary differentiation.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Fine-tuning LLMs for specific consultancy tasks is still an art, not a fully mature science."]'
      },
      'Scalability & Performance': {
        'weight': 0.50,
        'common_terminologies': 'System Capacity, Throughput, Latency, Growth Handling, Performance Metrics',
        'objective': 'To determine if the technical architecture and underlying systems can efficiently handle increasing user numbers, data volumes, or transaction loads.',
        'analysis_steps': [
            'Define Performance Targets: Establish clear targets for user load, transaction volume (queries per second), and response times (latency).',
            'Architecture Review: Analyze the proposed system architecture for its ability to scale horizontally (adding more servers) and vertically (upgrading existing servers).',
            'Resource Efficiency Assessment: Evaluate how efficiently the system utilizes computing resources (CPU, memory, storage) at scale.',
            'Cost Projection: Estimate the cost implications of scaling the infrastructure to meet future demand.'
        ],
        'methods': 'System Architecture Design Patterns, Cloud Computing Scalability Principles, Performance Testing Methodologies.',
        'data_required': 'Projected user growth, expected query volume, estimated data storage needs, cloud provider pricing.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the predicted scalability and performance.',
            'Max Users Supported: (e.g., "Scales to 100,000 concurrent users").',
            'Avg. Latency: (e.g., "Target <500ms response time for complex queries").',
            'Estimated Monthly Cloud Costs for Scaling: (e.g., "Initial $500/month, scaling to $5000/month at 10x users").'
        ],
        'assumptions_template': [
            'Cloud infrastructure will provide necessary resources on demand.',
            'AI model complexity doesn\'t disproportionately increase processing time.'
        ],
        'example_table': {
            'headers': ['Metric', 'Initial Target', 'Scaled Target (e.g., 10x users)', 'Architecture Assessment (Good/Mod/Weak)', 'Score (1-5)'],
            'rows': [
                ['Max Users', '[e.g., 10,000]', '[e.g., 100,000]', '[Good]', '[Score]'],
                ['Avg. Latency', '[e.g., <1 sec]', '[e.g., <1 sec]', '[Good]', '[Score]'],
                ['Monthly Cloud Cost', '[e.g., $1000]', '[e.g., $8000]', '[Good]', '[Score]'],
                ['Overall Scalability:', '[Summary of scalability outlook]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-architect the system for horizontal scaling; utilize serverless functions for variable load.',
            'high': 'Ensure continuous performance monitoring and cost optimization as you scale.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI\'s inference cost per query will be a critical factor in long-term scalability."]'
      },
    },
    'Operational Viability': {
      'common_terminologies': 'Resource Availability, Capital Access, Process Efficiency, Workflow Optimization',
      'Resource Availability': {
        'weight': 0.50,
        'common_terminologies': 'Human Resources, Financial Capital, Data Access, Partnerships',
        'objective': 'To check if the necessary human talent (skilled professionals), financial capital, and material supplies are readily accessible to execute the project.',
        'analysis_steps': [
            'Human Resource Mapping: Identify all required roles, skill sets, and number of personnel for development, operations, sales, and support.',
            'Talent Pool Assessment: Evaluate the availability and cost of skilled talent in India for these specific roles (e.g., AI engineers, domain experts in education/research, sales professionals).',
            'Financial Capital Assessment: Analyze the current funding environment in India for AI/EdTech startups (e.g., angel, seed, VC funding availability).',
            'Other Resources: Identify any other critical resources (e.g., proprietary data sources for AI training, key partnerships for content/distribution).'
        ],
        'methods': 'Resource Planning, Talent Market Analysis, Funding Landscape Analysis.',
        'data_required': 'Salary benchmarks for AI/EdTech roles in India, funding reports, talent pool statistics, reports on data availability.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the ease of securing required resources.',
            '% of Key Roles Fillable: (e.g., "80% of critical roles can be filled within 6 months").',
            'Estimated Funding Gap: (e.g., "$500K funding gap for next 12 months").',
            'Availability of Training Data: (e.g., "Publicly available academic datasets are sufficient").'
        ],
        'assumptions_template': [
            'The Indian talent market can supply the necessary skills at reasonable costs.',
            'The project\'s funding needs align with current investor appetite.'
        ],
        'example_table': {
            'headers': ['Resource Type', 'Required Quantity', 'Availability in India', 'Cost/Difficulty', 'Score (1-5)'],
            'rows': [
                ['AI Engineers', '[e.g., 5]', '[Moderate]', '[High]', '[Score]'],
                ['Domain Experts', '[e.g., 3]', '[Good]', '[Moderate]', '[Score]'],
                ['Seed Capital', '[e.g., $1M]', '[Good]', '[Moderate]', '[Score]'],
                ['Overall Availability:', '[Summary of resource access]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Develop a robust talent acquisition strategy; explore government grants or alternative funding sources.',
            'high': 'Focus on efficient resource utilization and cost optimization.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Securing high-quality training data for specific academic domains might be a hidden challenge."]'
      },
      'Process Efficiency': {
        'weight': 0.50,
        'common_terminologies': 'Operational Optimization, Workflow Streamlining, Cost Efficiency, Automation Potential',
        'objective': 'To evaluate how streamlined and optimized the internal processes (e.g., AI model training, content generation, customer service, delivery) will be, minimizing waste and maximizing output.',
        'analysis_steps': [
            'Process Mapping: Document key operational workflows (e.g., AI model deployment, user query handling, feedback integration).',
            'Automation Potential: Identify areas where AI or software automation can significantly reduce manual effort and errors.',
            'Cost Efficiency Analysis: Estimate cost savings from process optimization and automation.',
            'Quality Control Integration: Assess how quality control mechanisms are embedded into the processes to ensure high standards of AI output and service delivery.'
        ],
        'methods': 'Lean Principles, Business Process Re-engineering (BPR), Workflow Automation Tools Assessment.',
        'data_required': 'Time studies for manual tasks, cost breakdowns per operational step, error rates, customer support ticket resolution times.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on predicted efficiency.',
            'Time Saved per Process: (e.g., "Automated onboarding reduces time from 2 hours to 15 minutes").',
            'Cost Reduction per Unit of Output: (e.g., "AI handles 70% of Tier 1 customer queries, saving X% in support costs").',
            'Customer Support Ticket Resolution Time: (e.g., "Average resolution time reduced by 50%").'
        ],
        'assumptions_template': [
            'The AI can effectively automate significant portions of the consultancy process.',
            'Human oversight and quality control processes are efficiently integrated.'
        ],
        'example_table': {
            'headers': ['Process Area', 'Current/Manual Time (Est.)', 'Proposed AI/Automated Time (Est.)', 'Efficiency Gain (%)', 'Score (1-5)'],
            'rows': [
                ['Idea Validation', '[e.g., 2 weeks]', '[e.g., 2 hours]', '[e.g., 99%]', '[Score]'],
                ['Customer Support', '[e.g., 30 min/ticket]', '[e.g., 5 min/ticket]', '[e.g., 83%]', '[Score]'],
                ['Content Generation', '[e.g., 1 day/report]', '[e.g., 1 hour/report]', '[e.g., 90%]', '[Score]'],
                ['Overall Efficiency:', '[Summary of operational efficiency]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Prioritize automation of repetitive tasks; streamline workflows to reduce bottlenecks.',
            'high': 'Continuously monitor process performance and seek further optimization opportunities.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The efficiency gains from AI are clear, but maintaining quality control at scale will be crucial."]'
      },
    },
    'Scalability Potential': {
      'common_terminologies': 'Growth Capacity, Expansion Strategy, Business Model Scaling',
      'Business Model Scalability': {
        'weight': 0.50,
        'common_terminologies': 'Unit Economics, Margin Growth, Revenue Scaling, Growth Model',
        'objective': 'To assess if the revenue model allows revenue to grow disproportionately faster than costs as the business expands.',
        'analysis_steps': [
            'Unit Economics Analysis: Calculate the cost to serve one user/customer versus the revenue generated from that user.',
            'Cost Structure Analysis: Identify fixed vs. variable costs and how they behave at increasing user volumes.',
            'Margin Projections: Project gross and net margins at different scales (e.g., 1,000 users, 10,000 users, 100,000 users).',
            'CAC Payback Period: Estimate how long it takes to recoup customer acquisition costs.'
        ],
        'methods': 'Unit Economics Analysis, Cost-Volume-Profit (CVP) Analysis, Business Model Canvas.',
        'data_required': 'Projected user acquisition costs, average revenue per user (ARPU), variable costs per user, fixed operating costs.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the inherent scalability of the business model.',
            'ARPU (Average Revenue Per User) vs. CPU (Cost Per User): How these metrics change with scale.',
            'Gross Margin % at Scale: Projected profit margin after direct costs.',
            'CAC Payback Period: Time to recover customer acquisition cost.'
        ],
        'assumptions_template': [
            'The AI infrastructure costs scale efficiently with user volume.',
            'Pricing models remain stable or can be optimized for scale.'
        ],
        'example_table': {
            'headers': ['Metric', 'Initial Phase (e.g., 100 users)', 'Growth Phase (e.g., 10,000 users)', 'Scaled Phase (e.g., 100,000 users)', 'Score (1-5)'],
            'rows': [
                ['ARPU', '[e.g., $20]', '[e.g., $20]', '[e.g., $20]', '[N/A]'],
                ['CPU', '[e.g., $15]', '[e.g., $8]', '[e.g., $4]', '[Score]'],
                ['Gross Margin %', '[e.g., 25%]', '[e.g., 60%]', '[e.g., 80%]', '[Score]'],
                ['Overall Scalability:', '[Summary of business model scalability]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-evaluate pricing strategy or explore alternative revenue models with better unit economics.',
            'high': 'Focus on rapid user acquisition to capitalize on the scalable business model.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI\'s ability to serve many users with minimal incremental cost is a strong scalability driver."]'
      },
      'Market Expansion Potential': {
        'weight': 0.50,
        'common_terminologies': 'Geographic Expansion, New Customer Segments, Product Diversification, Internationalization',
        'objective': 'To identify how easily the product/service can be introduced into new geographic markets, demographics, or use cases beyond the initial target.',
        'analysis_steps': [
            'Geographic Expansion: Identify potential new regions (e.g., other Indian states, international markets) with similar needs and infrastructure.',
            'New Customer Segments: Evaluate adjacent customer segments (e.g., K-12 students, corporate R&D departments, vocational training institutes) that could benefit from the core AI.',
            'Product Diversification: Brainstorm new features or services that leverage the core AI capability for new use cases.',
            'Market Assessment: For each potential expansion area, assess market size, competitive landscape, and regulatory hurdles.'
        ],
        'methods': 'Ansoff Matrix (Market Development, Product Development, Diversification), Market Research.',
        'data_required': 'Demographic data for new regions, economic reports of new regions, competitive analysis for new markets, educational system structures in other countries.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the ease and attractiveness of expansion.',
            'Number of Viable Expansion Avenues: (e.g., "Identified 3 new geographic markets").',
            'Estimated Revenue Potential from Expansion: (e.g., "$75M additional revenue from new segments").'
        ],
        'assumptions_template': [
            'The core AI solution is adaptable to different contexts and languages.',
            'Market entry barriers in new regions are manageable.'
        ],
        'example_table': {
            'headers': ['Expansion Avenue', 'Estimated Market Size', 'Feasibility (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['New Geography (e.g., South India)', '[e.g., $20M]', '[High]', '[Score]'],
                ['New Segment (e.g., K-12)', '[e.g., $30M]', '[Medium]', '[Score]'],
                ['Product Diversification (e.g., AI curriculum design)', '[e.g., $75M]', '[Medium]', '[Score]'],
                ['Overall Potential:', '[Summary of expansion outlook]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Focus on dominating current market; avoid premature expansion.',
            'high': 'Develop a phased expansion roadmap, prioritizing high-potential avenues.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI\'s language capabilities could make international expansion relatively easier."]'
      },
    },
  },
  'Business Model & Strategy': {
    'purpose': 'To assess how the idea will generate revenue, sustain itself, and build lasting competitive advantages.',
    'Financial Viability': {
      'common_terminologies': 'Revenue Models, Cost Structure, Profitability, Funding Needs',
      'Revenue Stream Diversity': {
        'weight': 0.50,
        'common_terminologies': 'Monetization Mix, Business Model Innovation, Recurring Revenue',
        'objective': 'To identify how many distinct and sustainable ways the project plans to generate income.',
        'analysis_steps': [
            'Revenue Model Identification: List all proposed revenue streams (e.g., subscriptions, institutional licenses, premium features, advertising).',
            'Revenue Projections: Forecast expected revenue from each stream over 3-5 years.',
            'Assess Stability & Growth: Evaluate the projected stability and growth potential of each revenue stream.',
            'Diversification Analysis: Analyze the dependency on a single revenue source.'
        ],
        'methods': 'Business Model Canvas, Pricing Strategy Models (Freemium, Subscription, Usage-based, Value-based pricing).',
        'data_required': 'Competitor pricing, market research on willingness-to-pay, projected user numbers for each tier.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the robustness and diversity of revenue streams.',
            '% of Revenue from Each Stream: (e.g., "80% subscriptions, 15% institutional licenses, 5% premium features").',
            'Number of Distinct Revenue Streams: (e.g., "3 distinct streams").'
        ],
        'assumptions_template': [
            'The chosen pricing models are accepted by the target market.',
            'Secondary revenue streams are feasible to implement.'
        ],
        'example_table': {
            'headers': ['Revenue Stream', 'Description', 'Projected % of Total Revenue', 'Stability (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Subscriptions', '[e.g., Monthly access for individuals]', '[e.g., 80%]', '[High]', '[Score]'],
                ['Institutional Licenses', '[e.g., Annual access for colleges]', '[e.g., 15%]', '[High]', '[Score]'],
                ['Premium Features', '[e.g., AI-powered report generation]', '[e.g., 5%]', '[Medium]', '[Score]'],
                ['Overall Diversity:', '[Summary of revenue stream mix]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Explore additional revenue streams to reduce dependency on a single source.',
            'high': 'Optimize conversion rates for each revenue stream.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Institutional licenses could provide more stable, larger revenue chunks."]'
      },
      'Profitability & Margins': {
        'weight': 0.50,
        'common_terminologies': 'Net Profit, Gross Margin, Cost Control, Financial Performance, Break-even',
        'objective': 'To project the percentage of revenue that turns into profit after accounting for all costs (gross and net margins).',
        'analysis_steps': [
            'Detailed Financial Projections: Develop a 3-5 year financial model including projected Revenue, Cost of Goods Sold (COGS), Operating Expenses (OpEx), and Capital Expenditures (CapEx).',
            'P&L Statement: Generate projected Profit & Loss (Income) Statements.',
            'Margin Calculation: Calculate Gross Profit Margin and Net Profit Margin annually.',
            'Break-even Analysis: Determine the point at which total costs and total revenue are equal.'
        ],
        'methods': 'Financial Modeling, Break-even Analysis, Scenario Analysis.',
        'data_required': 'Revenue forecasts, detailed expense budgets (AI infrastructure, salaries, marketing, legal), COGS (if applicable), CapEx.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the projected profitability and financial health.',
            'Gross Margin %: (Gross Profit / Revenue) * 100%.',
            'Net Profit %: (Net Profit / Revenue) * 100%.',
            'Break-even Point (in users/revenue): Fixed Costs / (Per-Unit Revenue - Per-Unit Variable Costs).'
        ],
        'assumptions_template': [
            'Revenue growth projections are realistic.',
            'Expense control measures are effective.',
            'No major unforeseen capital expenditures.'
        ],
        'example_table': {
            'headers': ['Metric', 'Year 1 (Projected)', 'Year 3 (Projected)', 'Year 5 (Projected)', 'Score (1-5)'],
            'rows': [
                ['Revenue', '[e.g., $1M]', '[e.g., $10M]', '[e.g., $50M]', '[N/A]'],
                ['Gross Margin %', '[e.g., 30%]', '[e.g., 70%]', '[e.g., 85%]', '[Score]'],
                ['Net Profit %', '[e.g., -20%]', '[e.g., 15%]', '[e.g., 30%]', '[Score]'],
                ['Break-even Point', '[e.g., 50,000 users]', '[N/A]', '[N/A]', '[Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-evaluate cost structure, explore higher-margin revenue streams, or seek more capital.',
            'high': 'Focus on efficient scaling to maximize profitability as user base grows.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI inference costs will be a significant variable expense, needing careful management."]'
      },
    },
    'Defensibility': {
      'common_terminologies': 'Competitive Advantage, Moat, Barriers to Entry, Sustainable Advantage',
      'Intellectual Property (IP)': {
        'weight': 0.50,
        'common_terminologies': 'Patents, Trademarks, Copyrights, Trade Secrets, IP Protection',
        'objective': 'To assess the strength and breadth of legal protection for the project\'s unique innovations.',
        'analysis_steps': [
            'IP Identification: Identify all potentially protectable assets (e.g., novel AI algorithms, unique data processing methods, proprietary training datasets, brand name, logo, software code, unique content).',
            'Protection Strategy: Outline a plan for securing patents, trademarks, copyrights, and trade secret protection.',
            'Freedom-to-Operate: Conduct basic checks to ensure the idea does not infringe on existing IP.',
            'IP Enforcement: Consider the feasibility and cost of defending IP rights.'
        ],
        'methods': 'IP Strategy Development, Patentability Search, Trademark Search, Copyright Registration.',
        'data_required': 'Patent search reports, trademark search reports, legal opinions, internal documentation of proprietary developments.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the strength and enforceability of IP.',
            'Number of Patents/Trademarks: (e.g., "1 patent pending, 2 trademarks registered").',
            'IP Coverage: Breadth of protection (e.g., "Covers core AI algorithm and brand name").'
        ],
        'assumptions_template': [
            'The innovator will seek professional legal counsel for IP protection.',
            'The IP strategy is aligned with the business goals.'
        ],
        'example_table': {
            'headers': ['IP Type', 'Asset', 'Protection Status', 'Strength (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Patent', '[e.g., AI algorithm]', '[Pending]', '[Medium]', '[Score]'],
                ['Trademark', '[e.g., Pragati AI name]', '[Registered]', '[High]', '[Score]'],
                ['Trade Secret', '[e.g., Proprietary dataset]', '[Implemented]', '[Medium]', '[Score]'],
                ['Overall IP:', '[Summary of IP strategy]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Consult IP counsel immediately; focus on trade secrets if patentability is low.',
            'high': 'Execute IP protection plan; monitor for infringement.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "IP for AI is complex; focus on proprietary data and unique model architectures as key moats."]'
      },
      'Network Effects': {
        'weight': 0.50,
        'common_terminologies': 'Virality, Platform Growth, User Interdependence, Community Effect',
        'objective': 'To determine if the value of the product or service increases for existing users as more new users join.',
        'analysis_steps': [
            'Identify Network Effect Type: Determine if direct (value increases directly with more users, e.g., social media) or indirect (value increases for one group as another group grows, e.g., marketplace).',
            'Mechanism Analysis: Detail how the network effect is created and sustained (e.g., data feedback loops, user-generated content, peer interaction).',
            'Growth Loop Identification: Map how new users contribute to the value for existing users, driving further growth.',
            'Quantification: Estimate the strength and potential of the network effect.'
        ],
        'methods': 'Metcalfe\'s Law (Conceptual), Platform Business Models, AARRR Funnel.',
        'data_required': 'User growth rates, referral rates, user-generated content volume, data on how new users improve existing user experience.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the strength and potential of network effects.',
            'Referral Rate: (New users from referrals / Total new users) * 100%.',
            'Data Feedback Loop Efficiency: (e.g., "Each 1000 new users improves AI accuracy by X%").'
        ],
        'assumptions_template': [
            'Users are willing to contribute data or interact in ways that create network effects.',
            'The platform can handle increased user interaction without performance degradation.'
        ],
        'example_table': {
            'headers': ['Network Effect Type', 'Description/Mechanism', 'Impact on Value', 'Strength (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Indirect', '[e.g., More users = more data = smarter AI suggestions]', '[e.g., Improved AI accuracy]', '[Medium]', '[Score]'],
                ['Direct (if applicable)', '[e.g., Collaborative project spaces]', '[e.g., Enhanced peer learning]', '[Low]', '[Score]'],
                ['Overall Effects:', '[Summary of network effect potential]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Explore ways to build stronger network effects or focus on other defensibility strategies.',
            'high': 'Design product features that actively encourage and leverage network effects for exponential growth.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The data feedback loop for AI model improvement is a strong indirect network effect."]'
      },
    },
  },
  'Team & Organizational Health': {
    'purpose': 'To assess the human capital driving the idea, including founder capabilities and organizational culture.',
    'Founder-Fit': {
      'common_terminologies': 'Team Capabilities, Leadership Qualities, Entrepreneurial Experience',
      'Relevant Experience': {
        'weight': 0.50,
        'common_terminologies': 'Industry Experience, Domain Expertise, Past Success, Track Record',
        'objective': 'To evaluate if the founding team possesses direct, hands-on experience in the industry, technology, or business model proposed.',
        'analysis_steps': [
            'Resume/Bio Review: Examine founders\' professional backgrounds, education, and past roles.',
            'Experience Mapping: Map their experience against the critical domains for Pragati AI (AI/ML, EdTech, business development, product management).',
            'Track Record Assessment: Look for evidence of prior success in relevant ventures, projects, or research.',
            'Domain Expertise Depth: Assess the depth of their understanding in the core problem area.'
        ],
        'methods': 'Due Diligence on Founding Team, Expert Interviews, Reference Checks.',
        'data_required': 'Founder resumes, LinkedIn profiles, past company performance (if public), academic publications, professional network references.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the relevance and depth of experience.',
            'Years of Relevant Experience: (e.g., "Combined 20+ years in AI/EdTech").',
            'Number of Prior Successes: (e.g., "2 successful startups, 1 research publication").'
        ],
        'assumptions_template': [
            'The information provided by founders is accurate.',
            'Past experience is a good indicator of future performance.'
        ],
        'example_table': {
            'headers': ['Founder Role', 'Key Relevant Experience', 'Years', 'Past Success (Yes/No/Partial)', 'Score (1-5)'],
            'rows': [
                ['CEO', '[e.g., EdTech Sales, Startup Scaling]', '[e.g., 15]', '[Yes]', '[Score]'],
                ['CTO', '[e.g., AI/ML Research, Software Arch.]', '[e.g., 10]', '[Yes]', '[Score]'],
                ['Overall Fit:', '[Summary of team\'s relevant experience]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Consider bringing on co-founders or key advisors with critical missing experience.',
            'high': 'Highlight the team\'s expertise as a key strength in investor pitches.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Strong technical background, but needs more deep academic domain expertise for specific niches."]'
      },
      'Complementary Skills': {
        'weight': 0.50,
        'common_terminologies': 'Team Balance, Skill Gaps, Cross-functional Expertise, Leadership Diversity',
        'objective': 'To assess if the team has a balanced mix of essential skills (e.g., technical, business development, marketing, operations) needed for holistic execution.',
        'analysis_steps': [
            'Required Skills Mapping: List all essential skill sets for the project (e.g., AI development, education/research domain expertise, UX design, business development, marketing, operations, legal, finance).',
            'Team Skill Assessment: Map existing team members\' skills against this comprehensive list.',
            'Gap Identification: Clearly identify any significant skill gaps within the current team.',
            'Mitigation Plan: Outline how these gaps will be addressed (e.g., future hires, advisors, external partnerships).'
        ],
        'methods': 'Skills Matrix, Team Gap Analysis, Belbin Team Roles.',
        'data_required': 'Self-assessments by founders, peer reviews, job descriptions for critical roles, recruitment market analysis.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the balance and completeness of skills.',
            '% of Critical Skills Covered In-House: (e.g., "Team covers 70% of critical skills").',
            'Number of Key Skill Gaps: (e.g., "Missing dedicated marketing and legal expertise").'
        ],
        'assumptions_template': [
            'The team is open to acknowledging and addressing skill gaps.',
            'External talent or advisory support is available for missing skills.'
        ],
        'example_table': {
            'headers': ['Skill Area', 'Team Coverage (Yes/No/Partial)', 'Gap Severity (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['AI/ML Engineering', '[Yes]', '[Low]', '[Score]'],
                ['EdTech Domain', '[Partial]', '[Medium]', '[Score]'],
                ['Business Development', '[No]', '[High]', '[Score]'],
                ['Overall Balance:', '[Summary of team skill balance]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Prioritize hiring for critical skill gaps; seek advisors with missing expertise.',
            'high': 'Leverage the team\'s diverse strengths for cross-functional collaboration.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Need a dedicated compliance expert or strong legal advisor early on."]'
      },
    },
    'Culture/Values': {
      'common_terminologies': 'Organizational Values, DEI, Mission-Driven, Work Environment',
      'Mission Alignment': {
        'weight': 0.50,
        'common_terminologies': 'Shared Vision, Purpose-Driven, Values Congruence, Strategic Fit',
        'objective': 'To understand how deeply the team members\' personal values and goals resonate with the project\'s core mission and purpose.',
        'analysis_steps': [
            'Mission/Vision Review: Examine the documented mission, vision, and values statements (if any).',
            'Team Interviews/Surveys: Conduct interviews or surveys to gauge individual team members\' understanding and commitment to the mission.',
            'Behavioral Observation: Observe how team decisions and daily actions reflect the stated mission and values.',
            'Recruitment Alignment: Assess how the mission and values are integrated into the hiring process.'
        ],
        'methods': 'Cultural Assessment Surveys, Mission/Vision Statement Analysis, Leadership Interviews.',
        'data_required': 'Internal survey results on mission clarity/alignment, documented mission/vision statements, employee testimonials.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the strength of mission alignment.',
            'Employee Survey Score: (e.g., "90% of team members strongly agree with the mission").',
            'Consistency Score: How consistently actions align with stated values.'
        ],
        'assumptions_template': [
            'The mission is clearly articulated and communicated.',
            'Team members are honest in their self-assessment.'
        ],
        'example_table': {
            'headers': ['Aspect', 'Observation/Metric', 'Score (1-5)'],
            'rows': [
                ['Clarity', '[e.g., Mission statement is concise and inspiring]', '[Score]'],
                ['Commitment', '[e.g., Team actively discusses mission in meetings]', '[Score]'],
                ['Behavior', '[e.g., Decisions reflect core values]', '[Score]'],
                ['Overall Alignment:', '[Summary of mission alignment]', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Revisit and clearly articulate the mission; integrate values into hiring and performance reviews.',
            'high': 'Leverage mission alignment for team motivation and external branding.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "A strong social mission can be a powerful motivator for attracting talent to an AI for good initiative."]'
      },
      'Diversity & Inclusion': {
        'weight': 0.50,
        'common_terminologies': 'DEI, Inclusive Design, Algorithmic Bias, Equity, Belonging',
        'objective': 'To assess the presence of diverse perspectives (gender, ethnicity, background, thought) within the team and a commitment to inclusive practices.',
        'analysis_steps': [
            'Demographic Analysis: Collect and analyze team demographic data (e.g., gender, regional background, educational diversity, professional history).',
            'Policy Review: Review hiring practices, promotion policies, and internal guidelines for fairness and inclusivity.',
            'Inclusion Sentiment: Conduct employee surveys to gauge feelings of belonging, psychological safety, and perceived equity.',
            'Bias Mitigation: Assess strategies for mitigating unconscious bias in AI development and team interactions.'
        ],
        'methods': 'DEI Audit, Unconscious Bias Training Principles, Inclusion Nudges, Ethical AI Frameworks.',
        'data_required': 'Team demographic statistics, internal survey results on inclusion, documented DEI policies, AI bias audit reports.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the level of diversity and commitment to inclusion.',
            'Diversity Metrics: (e.g., "X% female representation, Y% regional diversity").',
            'Inclusion Score: Average rating from employee surveys on feeling included and valued.'
        ],
        'assumptions_template': [
            'The team understands the importance of diversity for innovation and ethical AI.',
            'Resources are allocated for DEI initiatives and training.'
        ],
        'example_table': {
            'headers': ['Aspect', 'Observation/Metric', 'Score (1-5)'],
            'rows': [
                ['Demographic Diversity', '[e.g., Good mix of tech/non-tech backgrounds]', '[Score]'],
                ['Inclusive Practices', '[e.g., Regular bias training, open feedback]', '[Score]'],
                ['Algorithmic Bias Mitigation', '[e.g., Clear process for bias detection]', '[Score]'],
                ['Overall DEI Status:', '[Summary of DEI efforts]', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Implement targeted hiring strategies for diversity; provide unconscious bias training.',
            'high': 'Showcase DEI efforts as a competitive advantage and for talent attraction.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Crucial for an AI product to avoid algorithmic bias, needs continuous focus."]'
      },
    },
  },
  'External Environment & Compliance': {
    'purpose': 'To assess the external forces impacting the idea, from regulatory hurdles to ecosystem support.',
    'Regulatory (India)': {
      'common_terminologies': 'Legal Compliance, Data Protection, Sectoral Laws, Governance',
      'Data Privacy Compliance': {
        'weight': 0.50,
        'common_terminologies': 'GDPR, DPDP Bill, Data Security, PII Handling, Privacy Regulations',
        'objective': 'To ensure the project\'s handling of user data adheres to relevant Indian data protection laws (e.g., DPDP Act) and international standards.',
        'analysis_steps': [
            'Data Inventory & Mapping: Identify all types of data collected, stored, and processed, and their flow.',
            'Privacy by Design: Assess if privacy principles are embedded into the design of systems and processes from the outset.',
            'Data Protection Impact Assessment (DPIA): Conduct assessments to identify and minimize data protection risks.',
            'Consent Management Framework: Ensure valid, explicit, and documented user consent mechanisms are in place.',
            'Security Measures: Review technical and organizational security measures to protect data.'
        ],
        'methods': 'Privacy by Design, Data Protection Impact Assessment (DPIA), Consent Management Framework, Security Audits.',
        'data_required': 'Legal texts (DPDP Act), government circulars, policy documents, internal data handling policies, security audit reports.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the level of compliance and risk.',
            'Number of Critical Compliance Gaps: (e.g., "3 major gaps identified in data consent mechanisms").',
            '% of Data Processing Activities Compliant: (e.g., "70% of data processing activities are compliant with DPDP Act").'
        ],
        'assumptions_template': [
            'The innovator will seek professional legal counsel for detailed compliance.',
            'The regulatory environment is dynamic and requires continuous monitoring.'
        ],
        'example_table': {
            'headers': ['Compliance Aspect', 'Status (Compliant/Partial/Non)', 'Risk Level (High/Med/Low)', 'Notes/Issues', 'Score (1-5)'],
            'rows': [
                ['Data Collection Consent', '[Partial]', '[High]', '[e.g., Implicit consent for some data]', '[Score]'],
                ['Data Storage Security', '[Compliant]', '[Low]', '[e.g., Encrypted, access control]', '[Score]'],
                ['Data Subject Rights', '[Partial]', '[Medium]', '[e.g., Opt-out process unclear]', '[Score]'],
                ['Overall Compliance:', '[Summary of data privacy status]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Engage legal counsel immediately; prioritize implementation of DPDP Act requirements.',
            'high': 'Maintain continuous monitoring and adapt to evolving privacy laws.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Handling academic data adds another layer of complexity; need clear policies."]'
      },
      'Sector-Specific Compliance': {
        'weight': 0.50,
        'common_terminologies': 'Industry Regulations, Licensing, Certifications, Specific Laws',
        'objective': 'To verify adherence to regulations unique to the project\'s industry in India (e.g., UGC for EdTech, specific AI guidelines).',
        'analysis_steps': [
            'Sectoral Regulation Identification: Identify specific regulations and guidelines for EdTech and AI sectors in India (e.g., UGC guidelines for higher education, AI ethics guidelines from NITI Aayog, any state-specific education laws).',
            'Licensing & Certification: Determine any necessary licenses, permits, or certifications required to operate.',
            'Ethical AI Guidelines: Assess alignment with national AI ethics principles (e.g., NITI Aayog\'s Responsible AI).',
            'Compliance Roadmap: Develop a plan to address any identified compliance gaps.'
        ],
        'methods': 'Regulatory Mapping, Industry Standard Compliance Audit, Legal Opinion.',
        'data_required': 'Ministry of Education policies, AICTE/UGC guidelines, NITI Aayog reports on AI policy, industry association codes of conduct.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the level of adherence to sector-specific regulations.',
            'Number of Unaddressed Regulations: (e.g., "2 key EdTech regulations not yet addressed").',
            'Risk of Non-Compliance: (e.g., "High risk of penalties for non-compliance").'
        ],
        'assumptions_template': [
            'The innovator is aware of the relevant sectoral regulations.',
            'Regulations are not overly burdensome for startups.'
        ],
        'example_table': {
            'headers': ['Sectoral Area', 'Relevant Guideline/Law', 'Pragati AI Status', 'Risk Level (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['EdTech', 'UGC Guidelines', '[e.g., Content quality]', '[Medium]', '[Score]'],
                ['AI Ethics', 'NITI Aayog Principles', '[e.g., Bias mitigation]', '[Medium]', '[Score]'],
                ['Overall Compliance:', '[Summary of sectoral compliance]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Seek clarification from regulatory bodies; develop internal policies to ensure adherence.',
            'high': 'Leverage compliance as a trust factor in the market.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The ambiguity around AI ethics in India requires proactive self-regulation and transparency."]'
      },
    },
    'Sustainability (ESG)': {
      'common_terminologies': 'Environmental Impact, Social Responsibility, Governance, SDGs, Ethical AI',
      'Environmental Impact': {
        'weight': 0.50,
        'common_terminologies': 'Carbon Footprint, Resource Consumption, Green IT, Eco-friendly',
        'objective': 'To assess the project\'s footprint on the natural environment (e.g., carbon emissions, waste generation, resource consumption).',
        'analysis_steps': [
            'Energy Consumption Analysis: Estimate energy usage for AI model training and inference (primarily cloud data centers).',
            'Resource Usage: Consider indirect environmental impacts (e.g., waste from hardware lifecycle, employee commuting, office energy).',
            'Green Practices: Identify opportunities for adopting green computing principles, choosing sustainable cloud providers, or implementing carbon offsetting strategies.',
            'Environmental KPIs: Define key performance indicators for environmental impact.'
        ],
        'methods': 'Lifecycle Assessment (LCA), Carbon Footprint Calculation, Green IT Principles.',
        'data_required': 'Estimated kWh for AI operations, cloud provider energy mix data, hardware disposal policies.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the predicted environmental impact.',
            'Estimated Carbon Emissions: (e.g., "X tons of CO2e per year").',
            'Resource Efficiency: (e.g., "Uses Y% less energy than traditional methods").'
        ],
        'assumptions_template': [
            'Cloud providers offer transparent data on their energy mix and sustainability efforts.',
            'The project is committed to minimizing its environmental footprint.'
        ],
        'example_table': {
            'headers': ['Aspect', 'Observation/Metric', 'Impact (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Energy Consumption (AI)', '[e.g., Moderate for training, low for inference]', '[Low]', '[Score]'],
                ['Waste Generation', '[e.g., Minimal physical waste]', '[Low]', '[Score]'],
                ['Green Practices', '[e.g., Cloud provider uses renewable energy]', '[High]', '[Score]'],
                ['Overall Impact:', '[Summary of environmental footprint]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'high_impact': 'Prioritize green cloud providers; explore carbon offsetting programs.',
            'low_impact': 'Highlight environmental responsibility in marketing and reporting.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The environmental impact is relatively low for a digital product, but scaling AI models can increase energy consumption."]'
      },
      'Social Impact (SDGs)': {
        'weight': 0.50,
        'common_terminologies': 'Community Benefit, Ethical Impact, Sustainable Development Goals (SDGs), Societal Value',
        'objective': 'To evaluate how the project contributes to or impacts the United Nations Sustainable Development Goals (SDGs) and broader social well-being.',
        'analysis_steps': [
            'SDG Mapping: Map Pragati AI\'s activities and expected outcomes to relevant UN Sustainable Development Goals (SDGs), particularly SDG 4 (Quality Education) and SDG 9 (Industry, Innovation, and Infrastructure).',
            'Beneficiary Identification: Clearly define who benefits from the project and how (e.g., students, researchers, institutions, underserved communities).',
            'Ethical AI Assessment: Evaluate adherence to ethical AI principles (fairness, transparency, accountability, privacy) to ensure positive social impact and avoid harm.',
            'Impact Measurement: Define metrics to track the social impact over time.'
        ],
        'methods': 'SDG Impact Assessment Tool, Ethical AI Frameworks, Stakeholder Analysis, Social Return on Investment (SROI).',
        'data_required': 'User testimonials on impact, pilot program outcomes (e.g., improved grades, successful funding), internal ethical AI guidelines.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the depth and breadth of positive social impact.',
            'Number of Beneficiaries: (e.g., "Impacts 10,000 students annually").',
            'Improved Learning/Research Outcomes: (e.g., "Pilot users show 15% higher research output").'
        ],
        'assumptions_template': [
            'The AI is developed and deployed ethically, minimizing bias.',
            'The service reaches underserved populations.'
        ],
        'example_table': {
            'headers': ['SDG/Social Aspect', 'Contribution/Impact', 'Assessment (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['SDG 4 (Quality Education)', '[e.g., Improved access to research guidance]', '[High]', '[Score]'],
                ['SDG 9 (Innovation)', '[e.g., Fosters startup development]', '[High]', '[Score]'],
                ['Ethical AI', '[e.g., Bias mitigation, transparency]', '[High]', '[Score]'],
                ['Overall Impact:', '[Summary of social impact]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Integrate social impact goals more explicitly into the core business model and operations.',
            'high': 'Actively communicate social impact to stakeholders and align with relevant national initiatives.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The potential for democratizing access to high-quality guidance is a strong social benefit."]'
      },
    },
    'Ecosystem Support (India)': {
      'common_terminologies': 'Government Support, Investor Relations, Partnerships, Industry Associations',
      'Government & Institutional Support': {
        'weight': 0.50,
        'common_terminologies': 'Grants, Incubators, Policy Support, Public Sector Partnerships, Schemes',
        'objective': 'To identify potential assistance from government programs, incubators, accelerators, or other institutional bodies in India.',
        'analysis_steps': [
            'Scheme Identification: Research relevant government schemes, grants, and incubators specifically for EdTech and AI startups in India (e.g., Startup India, NITI Aayog initiatives, state-level incubators, DST/DBT grants).',
            'Institutional Partnership Potential: Assess potential for strategic partnerships with public institutions (e.g., universities, research bodies, government departments) for pilot programs or data access.',
            'Policy Alignment: Evaluate how the project aligns with broader national policies (e.g., National Education Policy, Digital India) to leverage government support.',
            'Application Readiness: Assess readiness to apply for and secure such support.'
        ],
        'methods': 'Policy Analysis, Grant Application Strategy, Partnership Assessment.',
        'data_required': 'Eligibility criteria for schemes, grant success rates, lists of government-backed incubators, policy documents.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the ease and likelihood of securing support.',
            'Number of Relevant Schemes: (e.g., "Identified 5 relevant government schemes").',
            'Likelihood of Grant Success: (e.g., "Medium likelihood for Seed Fund").'
        ],
        'assumptions_template': [
            'The innovator actively seeks out and applies for relevant support.',
            'Government policies remain favorable to tech startups.'
        ],
        'example_table': {
            'headers': ['Support Type', 'Specific Program/Institution', 'Alignment with Pragati AI', 'Potential Benefit', 'Score (1-5)'],
            'rows': [
                ['Grants', '[e.g., Startup India Seed Fund]', '[e.g., Supports early-stage tech]', '[e.g., Funding]', '[Score]'],
                ['Incubation', '[e.g., IIT Delhi Incubation]', '[e.g., Mentorship, network]', '[e.g., Resources]', '[Score]'],
                ['Policy', '[e.g., National Education Policy]', '[e.g., Digital learning focus]', '[e.g., Favorable environment]', '[Score]'],
                ['Overall Support:', '[Summary of ecosystem support]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Focus on private funding sources; demonstrate value independently.',
            'high': 'Actively engage with government bodies and apply for relevant schemes.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Strong alignment with national policies can open doors for partnerships and funding."]'
      },
      'Investor & Partner Landscape': {
        'weight': 0.50,
        'common_terminologies': 'Funding Environment, Venture Capital, Angel Investors, Strategic Alliances',
        'objective': 'To understand the availability and appetite of investors (VCs, angels) and potential strategic partners for the project in India.',
        'analysis_steps': [
            'Investor Mapping: Identify and profile potential investors (VCs, angel networks) active in the Indian EdTech/AI space.',
            'Strategic Partner Identification: Identify potential strategic partners (e.g., large educational publishers, established EdTech platforms, coaching institutes, research organizations, corporate R&D departments).',
            'Appetite Assessment: Evaluate their investment thesis or partnership criteria and assess their likely interest and strategic fit with Pragati AI\'s vision.',
            'Funding Trends: Analyze recent funding trends and deal sizes in the Indian EdTech/AI sectors.'
        ],
        'methods': 'Investor Mapping, Partnership Strategy, Ecosystem Analysis.',
        'data_required': 'Funding reports (e.g., Tracxn, Crunchbase), VC firm portfolios, angel investor networks, news on recent investments, potential partner company profiles.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the attractiveness of the investor and partner landscape.',
            'Number of Active Investors: (e.g., "Identified 10+ active VCs").',
            'Number of Potential Strategic Partners: (e.g., "3 strong potential partners").',
            'Average Deal Size: (e.g., "$5M average seed round").'
        ],
        'assumptions_template': [
            'The project\'s funding needs align with current investor appetite.',
            'Potential partners see strategic value in collaboration.'
        ],
        'example_table': {
            'headers': ['Stakeholder Type', 'Examples/Description', 'Appetite/Fit (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Venture Capital', '[e.g., Accel, Sequoia India]', '[High]', '[Score]'],
                ['Angel Investors', '[e.g., Indian Angel Network]', '[Medium]', '[Score]'],
                ['Strategic Partners', '[e.g., Byju\'s, NPTEL]', '[Medium]', '[Score]'],
                ['Overall Landscape:', '[Summary of investor/partner environment]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Refine business model for investor appeal; seek non-dilutive funding first.',
            'high': 'Prepare compelling pitch deck; actively network with target investors and partners.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The \'AI consultancy\' niche might require educating investors on its unique value proposition."]'
      },
    },
  },
  'Risk & Future Outlook': {
    'purpose': 'To identify potential roadblocks, assess future trends, and evaluate investor appeal.',
    'Risk Assessment': {
      'common_terminologies': 'Risk Identification, Mitigation Strategy, Vulnerability Analysis',
      'Technical Risks': {
        'weight': 0.50,
        'common_terminologies': 'System Failure, Security Vulnerabilities, AI Bias, Hallucination, Development Hurdles',
        'objective': 'To identify potential challenges and failure points related to the technology development, implementation, or long-term maintenance.',
        'analysis_steps': [
            'Risk Identification: Brainstorm specific technical risks (e.g., AI model accuracy, data quality, scalability issues, cybersecurity vulnerabilities, integration challenges).',
            'Likelihood & Impact Assessment: For each risk, assess its probability of occurrence and its potential impact (e.g., system downtime, data breach, inaccurate AI output).',
            'Mitigation Strategy: Develop concrete plans to reduce the likelihood or impact of identified risks.',
            'Monitoring & Contingency: Establish mechanisms to monitor risks and prepare contingency plans.'
        ],
        'methods': 'Risk Matrix, FMEA (Failure Mode and Effects Analysis), Threat Modeling, AI Ethics Guidelines.',
        'data_required': 'Internal technical assessments, cybersecurity audit reports, AI model performance metrics, industry reports on AI failures.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the overall technical risk profile.',
            'Risk Score: (Likelihood x Impact) for each risk (e.g., 1-25 scale).',
            'Cost of Potential Failure: (e.g., "Data breach could cost $X").'
        ],
        'assumptions_template': [
            'The development team is aware of common AI/software risks.',
            'Resources will be allocated for risk mitigation.'
        ],
        'example_table': {
            'headers': ['Risk Description', 'Likelihood (High/Med/Low)', 'Impact (High/Med/Low)', 'Mitigation Strategy', 'Score (1-5)'],
            'rows': [
                ['AI Hallucination', '[Medium]', '[High]', '[e.g., Human-in-loop, robust validation]', '[Score]'],
                ['Data Security Breach', '[Low]', '[High]', '[e.g., Encryption, access control]', '[Score]'],
                ['Scalability Issues', '[Medium]', '[Medium]', '[e.g., Cloud architecture, load testing]', '[Score]'],
                ['Overall Risk:', '[Summary of technical risk profile]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'high_risk': 'Prioritize risk mitigation; develop robust testing and monitoring protocols.',
            'low_risk': 'Maintain vigilance; conduct regular risk reviews.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "AI bias is a subtle but critical risk that needs continuous monitoring and ethical review."]'
      },
      'Market Risks': {
        'weight': 0.50,
        'common_terminologies': 'Demand Fluctuation, Competitive Threats, Economic Downturns, Market Volatility',
        'objective': 'To assess external uncertainties that could negatively impact the project\'s market success.',
        'analysis_steps': [
            'Risk Identification: Brainstorm specific market risks (e.g., sudden shifts in user preferences, new disruptive competitors, economic downturns affecting education budgets, regulatory changes impacting market).',
            'Likelihood & Impact Assessment: For each risk, assess its probability of occurrence and its potential impact on revenue, user base, or brand.',
            'Mitigation Strategy: Develop plans to reduce exposure to market risks (e.g., diversification, agile response, strong customer relationships).',
            'Market Monitoring: Establish systems to continuously monitor market trends and competitor activities.'
        ],
        'methods': 'PESTEL Analysis, Scenario Planning, SWOT Analysis.',
        'data_required': 'Economic forecasts, market trend reports, competitor launch plans, user preference studies.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the overall market risk profile.',
            'Number of Critical Market Risks: (e.g., "3 major market risks identified").',
            'Impact of Top Market Risk: (e.g., "Could reduce revenue by 30%").'
        ],
        'assumptions_template': [
            'The market research accurately reflects potential external threats.',
            'The team has the agility to respond to market changes.'
        ],
        'example_table': {
            'headers': ['Risk Description', 'Likelihood (High/Med/Low)', 'Impact (High/Med/Low)', 'Mitigation Strategy', 'Score (1-5)'],
            'rows': [
                ['User Skepticism', '[Medium]', '[High]', '[e.g., Pilot studies, testimonials]', '[Score]'],
                ['New Competitor', '[Low]', '[High]', '[e.g., Strong IP, niche focus]', '[Score]'],
                ['Economic Downturn', '[Medium]', '[Medium]', '[e.g., Flexible pricing]', '[Score]'],
                ['Overall Risk:', '[Summary of market risks]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'high_risk': 'Develop agile market adaptation strategies; diversify target segments.',
            'low_risk': 'Continuously monitor market trends and competitor activities.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The perception of AI in education is a key market risk that needs to be proactively managed."]'
      },
    },
    'Investor Attractiveness': {
      'common_terminologies': 'Funding Potential, Valuation, Exit Strategy, Investment Readiness',
      'Valuation Potential': {
        'weight': 0.50,
        'common_terminologies': 'Pre-money/Post-money Valuation, Discounted Cash Flow (DCF), Multiples Method, Venture Capital Method, Scorecard Method',
        'objective': 'To estimate the future monetary worth of the project, often considering projected revenues, market multiples, and growth rates.',
        'analysis_steps': [
            'Financial Projections Review: Utilize projected financials (revenue, profit, cash flow) from Financial Viability.',
            'Valuation Methodology Application: Apply relevant valuation methodologies for early-stage AI startups (e.g., Scorecard Method, Venture Capital Method, Multiples Method based on comparable companies).',
            'Growth Narrative: Develop a compelling narrative that highlights the scalability and market potential to justify future valuation.',
            'Risk Adjustment: Factor in identified risks that could impact future valuation.'
        ],
        'methods': 'Pre-money/Post-money Valuation, Discounted Cash Flow (DCF), Multiples Method, Venture Capital Method, Scorecard Method.',
        'data_required': 'Projected financials, comparable company valuations, industry-specific valuation multiples, desired investor ROI.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the perceived valuation potential.',
            'Estimated Pre-money Valuation Range: (e.g., "$2M - $5M for seed round").',
            'Growth Rate: Projected revenue/user growth rate (e.g., "100% YoY growth").'
        ],
        'assumptions_template': [
            'The financial projections are credible and achievable.',
            'The market conditions for startup funding remain favorable.'
        ],
        'example_table': {
            'headers': ['Aspect', 'Observation/Metric', 'Impact on Valuation (Positive/Neutral/Negative)', 'Score (1-5)'],
            'rows': [
                ['Market Size', '[e.g., Large TAM]', '[Positive]', '[Score]'],
                ['Growth Rate', '[e.g., High projected user growth]', '[Positive]', '[Score]'],
                ['Defensibility', '[e.g., Moderate IP]', '[Neutral]', '[Score]'],
                ['Overall Potential:', '[Summary of valuation outlook]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Refine financial projections; seek strategic investors who value long-term potential over immediate profit.',
            'high': 'Prepare a compelling investor deck highlighting key valuation drivers.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The AI aspect could command higher multiples if strong defensibility is proven."]'
      },
      'Exit Strategy Viability': {
        'weight': 0.50,
        'common_terminologies': 'Acquisition Targets, IPO Potential, Liquidity Events, Investor Exit',
        'objective': 'To identify clear and attractive paths for investors to realize a return on their investment.',
        'analysis_steps': [
            'Acquisition Target Identification: Research potential strategic acquirers (e.g., large EdTech companies, tech giants, educational publishers) who might acquire Pragati AI in the future.',
            'IPO Potential: Assess the feasibility of a public listing (IPO) based on market conditions, company size, and regulatory requirements.',
            'Liquidity Event Planning: Outline a timeline and milestones for potential exit events.',
            'Comparable Exits: Analyze recent M&A deals or IPOs in similar sectors to benchmark potential exit values.'
        ],
        'methods': 'Exit Strategy Planning, M&A Market Analysis, IPO Readiness Assessment.',
        'data_required': 'Recent M&A deals in EdTech/AI, IPO market trends, profiles of potential acquirers.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the clarity and attractiveness of exit paths.',
            'Number of Potential Acquirers: (e.g., "Identified 3 potential strategic acquirers in EdTech/AI space").',
            'Average Acquisition Multiples: (e.g., "Recent EdTech acquisitions at 5-7x revenue").'
        ],
        'assumptions_template': [
            'The market for M&A remains active.',
            'Pragati AI achieves significant scale and market position to be attractive for acquisition/IPO.'
        ],
        'example_table': {
            'headers': ['Exit Type', 'Description', 'Potential Acquirers/Market', 'Likelihood (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Acquisition', '[e.g., Strategic acquisition by large EdTech]', '[e.g., Byju\'s, Unacademy]', '[Medium]', '[Score]'],
                ['IPO', '[e.g., Public listing]', '[e.g., Indian stock exchanges]', '[Low]', '[Score]'],
                ['Overall Viability:', '[Summary of exit strategy outlook]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Focus on building a highly profitable, sustainable business first; exit will follow.',
            'high': 'Build relationships with potential acquirers; position the company for a clear exit path.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "The rapid growth of the Indian EdTech market suggests strong acquisition potential in 3-5 years."]'
      },
    },
    'Academic/National Alignment': {
      'common_terminologies': 'Policy Alignment, Research Contribution, National Development Goals',
      'National Policy Alignment (India)': {
        'weight': 0.50,
        'common_terminologies': 'Digital India, Make in India, Skill India, Government Initiatives, Policy Fit',
        'objective': 'To determine how well the project aligns with broader national policies and initiatives in India.',
        'analysis_steps': [
            'Policy Identification: Identify key national policies and initiatives relevant to education, AI, digital transformation, and skill development in India (e.g., National Education Policy, Digital India, Skill India, National Strategy for AI).',
            'Alignment Assessment: Analyze how Pragati AI directly contributes to the objectives and goals of these policies.',
            'Synergy Identification: Highlight specific policy areas where strong synergy exists for potential government support or a favorable operating environment.',
            'Impact Quantification: Estimate the project\'s potential contribution to national goals (e.g., number of skilled individuals, research output).'
        ],
        'methods': 'Policy Alignment Matrix, Strategic Fit Analysis, Government Report Analysis.',
        'data_required': 'Official policy documents, government reports, speeches by policymakers.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the strength of policy alignment.',
            'Number of Aligned Policies: (e.g., "Aligns with 3 key national policies").',
            'Estimated Contribution to National Goals: (e.g., "Supports Digital India by reaching X users").'
        ],
        'assumptions_template': [
            'The national policies remain consistent and supportive of innovation.',
            'Government support translates into tangible benefits (e.g., grants, partnerships).'
        ],
        'example_table': {
            'headers': ['National Policy/Initiative', 'Relevant Objective', 'Pragati AI Contribution', 'Alignment Strength (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Digital India', '[e.g., Digital literacy]', '[e.g., Improves digital access to guidance]', '[High]', '[Score]'],
                ['Skill India', '[e.g., Skill development]', '[e.g., Enhances research/innovation skills]', '[High]', '[Score]'],
                ['National Education Policy', '[e.g., Quality education]', '[e.g., Personalized learning support]', '[High]', '[Score]'],
                ['Overall Alignment:', '[Summary of national policy alignment]', '', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Re-evaluate value proposition to find stronger policy alignment or focus on private sector.',
            'high': 'Actively seek government partnerships and leverage policy alignment in communications.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "Strong alignment can open doors for grants and pilot programs with public institutions."]'
      },
      'Academic/Research Contribution': {
        'weight': 0.50,
        'common_terminologies': 'Research Impact, Knowledge Creation, Academic Collaboration, Innovation Ecosystem',
        'objective': 'To assess if the project contributes new knowledge, methods, or insights that can advance academic research or national innovation goals.',
        'analysis_steps': [
            'Novelty in Research: Identify if the AI algorithms or methodologies developed for Pragati AI are novel or contribute to the state-of-the-art in AI/EdTech research.',
            'Publication Potential: Identify opportunities for academic publications (e.g., research papers on AI efficacy in education, ethical AI studies).',
            'Collaboration Opportunities: Assess potential for collaborations with universities, research institutions, or government labs.',
            'Knowledge Creation: Evaluate if the project contributes to the broader AI/EdTech research community or national innovation capacity.'
        ],
        'methods': 'Research Impact Assessment, Collaboration Strategy, Literature Review.',
        'data_required': 'Internal research findings, potential for novel datasets, academic partnership agreements, research grants for industry-academia collaboration.',
        'calculations_metrics': [
            'Qualitative Score (1-5): Based on the potential for academic/research impact.',
            'Number of Potential Publications: (e.g., "2-3 potential research papers").',
            'Number of Research Collaborations: (e.g., "Discussions with 2 universities").'
        ],
        'assumptions_template': [
            'The project team has the expertise and time to engage in academic pursuits.',
            'Academic institutions are open to industry collaborations.'
        ],
        'example_table': {
            'headers': ['Contribution Aspect', 'Description/Impact', 'Potential (High/Med/Low)', 'Score (1-5)'],
            'rows': [
                ['Novel AI Method', '[e.g., New AI model for personalized guidance]', '[High]', '[Score]'],
                ['Research Publications', '[e.g., Potential for papers on AI ethics]', '[Medium]', '[Score]'],
                ['Academic Collaboration', '[e.g., Partnership with IIT for pilot]', '[High]', '[Score]'],
                ['Overall Contribution:', '[Summary of academic impact]', '', '[Overall Score]']
            ]
        },
        'recommendations': {
            'low': 'Focus solely on commercialization; avoid diverting resources to academic pursuits.',
            'high': 'Actively pursue academic collaborations and publish research findings to build credibility.'
        },
        'mentor_insights_notes': '[Space for mentor\'s observations, e.g., "This could be a strong differentiator for attracting top AI talent and grants."]'
      },
    },
  },
}

# --- Gemini AI Prompting Function ---
def get_ai_evaluation(idea_name, idea_concept, cluster_name, param_name, sub_param_name, sub_param_details):
    """
    Calls the AI API (Gemini or OpenAI) to get an AI-generated score, explanation, and assumptions
    for a given sub-parameter.
    """
    prompt_template = """
    You are an expert AI idea validator for "Pragati - Idea to Impact Platform".
    Your task is to evaluate an innovative idea based on a specific sub-parameter from our validation framework.
    Provide an assigned score (1-5), a concise explanation for the score, and a brief assumption/consideration that justifies your evaluation.

    **Idea Name:** {idea_name}
    **Idea Concept:** {idea_concept}

    **Evaluation Context:**
    - **Cluster:** {cluster_name}
    - **Parameter:** {param_name}
    - **Sub-Parameter:** {sub_param_name}
    - **Objective of this Sub-Parameter:** {objective}
    - **Relevant Methods/Principles for Evaluation:** {methods}
    - **Key Data/Information to Consider for this Sub-Parameter:** {data_required}

    **Scoring Rubric (1-5):**
    - 5: Excellent (Strong evidence, highly aligned, minimal risk, clear advantage)
    - 4: Good (Positive evidence, generally aligned, minor areas for improvement/risk)
    - 3: Moderate (Mixed evidence, some clear challenges/risks, requires attention)
    - 2: Weak (Significant gaps, major challenges/risks, requires substantial rework)
    - 1: Poor (No evidence, fundamental flaws, highly problematic, major red flags)

    Your response MUST be a JSON object with the following structure:
    {{
        "assignedScore": <integer between 1 and 5>,
        "explanation": "<string, concise explanation for the score based on the idea concept and sub-parameter criteria>",
        "assumptions": "<string, brief assumption or consideration that supports your evaluation>"
    }}
    """

    prompt = prompt_template.format(
        idea_name=idea_name,
        idea_concept=idea_concept,
        cluster_name=cluster_name,
        param_name=param_name,
        sub_param_name=sub_param_name,
        objective=sub_param_details['objective'],
        methods=sub_param_details['methods'],
        data_required=sub_param_details['data_required']
    )

    if current_ai_provider is None:
        print(f"No AI provider available for {sub_param_name}. Using default score.")
        return {"assignedScore": 3, "explanation": "AI evaluation unavailable. Default score applied.", "assumptions": "No AI provider available."}
    
    try:
        if current_ai_provider == "gemini":
            response = gemini_model.generate_content(
                prompt,
                generation_config={
                    "response_mime_type": "application/json",
                    "response_schema": {
                        "type": "OBJECT",
                        "properties": {
                            "assignedScore": {"type": "INTEGER"},
                            "explanation": {"type": "STRING"},
                            "assumptions": {"type": "STRING"}
                        },
                        "required": ["assignedScore", "explanation", "assumptions"]
                    }
                }
            )
            parsed_response = json.loads(response.text)
            return parsed_response
            
        elif current_ai_provider == "openai":
            # Add JSON format instruction for OpenAI
            openai_prompt = prompt + """

Please respond with a valid JSON object in exactly this format:
{
    "assignedScore": <integer between 1-5>,
    "explanation": "<your explanation>",
    "assumptions": "<your assumptions>"
}"""
            
            response = openai_client.chat.completions.create(
                model="gpt-4o-mini",
                messages=[
                    {"role": "system", "content": "You are an expert startup idea evaluator. Always respond with valid JSON."},
                    {"role": "user", "content": openai_prompt}
                ],
                max_tokens=500,
                temperature=0.7
            )
            
            response_text = response.choices[0].message.content
            
            # Parse JSON response
            try:
                parsed_response = json.loads(response_text)
            except json.JSONDecodeError:
                # Extract JSON if it's embedded in other text
                json_match = re.search(r'\{.*\}', response_text, re.DOTALL)
                if json_match:
                    parsed_response = json.loads(json_match.group())
                else:
                    raise ValueError("Could not parse JSON from OpenAI response")
            
            return {
                "assignedScore": int(parsed_response["assignedScore"]),
                "explanation": parsed_response["explanation"],
                "assumptions": parsed_response["assumptions"]
            }
            
    except Exception as e:
        print(f"Error calling {current_ai_provider} API for {sub_param_name}: {e}")
        print(f"Using default score for {sub_param_name} due to API error.")
        # Fallback to a default score if API call fails
        return {"assignedScore": 3, "explanation": "AI evaluation failed. Default score applied.", "assumptions": "API call failed."}

# --- Helper Functions for Scoring Calculation ---
def calculate_weighted_score(assigned_score, sub_param_weight, param_weight, cluster_weight):
    """Calculates the weighted score contribution of a sub-parameter to the overall 5-point scale."""
    if assigned_score == 'N/A':
        return 0
    # The formula scales the 1-5 sub-parameter score by its relative weights at each level
    # and then by 5 to ensure the final overall score is also on a 1-5 scale.
    return (assigned_score / 5) * sub_param_weight * param_weight * cluster_weight * 5

def calculate_overall_score(sub_parameter_data_evaluated, cluster_weights_input):
    """Calculates the overall weighted score for the idea using evaluated data."""
    total_weighted_score = 0

    for cluster_name, cluster_data in sub_parameter_data_evaluated.items():
        if cluster_name == 'purpose': # Skip the purpose field
            continue
        cluster_weight_value = cluster_weights_input.get(cluster_name, 0) # Get the actual weight from input

        for param_name, param_data in cluster_data.items():
            if param_name == 'common_terminologies' or param_name == 'purpose': # Skip non-parameter fields
                continue
            param_weight_value = PARAMETER_WEIGHTS[cluster_name].get(param_name, 0)

            for sub_param_name, sub_param in param_data.items():
                if sub_param_name in ['weight', 'common_terminologies', 'objective', 'analysis_steps', 'methods', 'data_required', 'calculations_metrics', 'assumptions_template', 'example_table', 'recommendations', 'mentor_insights_notes']:
                    continue # Skip static definition fields

                total_weighted_score += calculate_weighted_score(
                    sub_param['assignedScore'],
                    sub_param['weight'], # Sub-parameter weight from its own definition
                    param_weight_value,
                    cluster_weight_value
                )
    return total_weighted_score

def get_validation_outcome(score):
    """Determines the validation outcome based on the overall score."""
    if score >= 4.0:
        return 'GOOD'
    if score >= 2.5:
        return 'MODERATE'
    return 'NOT RECOMMENDED'

def get_outcome_color(outcome):
    """Returns a color string for HTML styling based on the outcome."""
    if outcome == 'GOOD':
        return 'green'
    elif outcome == 'MODERATE':
        return 'orange'
    else:
        return 'red'

def get_recommendation_text(outcome):
    """Returns a recommendation message based on the outcome."""
    if outcome == 'GOOD':
        return 'Approved for Next Step (Consultancy): Idea has strong potential, minimal significant red flags. Focus on execution and scaling.'
    elif outcome == 'MODERATE':
        return 'Requires AI-Guided Modification & Re-upload: Idea has potential but with notable weaknesses or missing information. Please review the detailed report and make necessary revisions.'
    else:
        return 'Idea Not Viable (at this stage): Idea has fundamental flaws or significant unaddressed risks. Please consider a fundamental re-evaluation of the core concept.'

def generate_report_html(idea_name, idea_concept, overall_score, validation_outcome, sub_parameter_data_evaluated, cluster_weights_input):
    """Generates the detailed project report in HTML format."""
    outcome_color = get_outcome_color(validation_outcome)
    recommendation_text = get_recommendation_text(validation_outcome)
    current_date = datetime.now().strftime('%Y-%m-%d')

    html_report = f"""
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Detailed Project Report: {idea_name}</title>
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        <style>
            body {{ font-family: 'Inter', sans-serif; line-height: 1.6; color: #333; -webkit-print-color-adjust: exact; print-color-adjust: exact; }}
            h1, h2, h3, h4, h5, h6 {{ font-weight: 700; margin-bottom: 0.5em; }}
            h1 {{ font-size: 2.5em; color: #1a202c; text-align: center; margin-bottom: 1em; }}
            h2 {{ font-size: 2em; color: #2d3748; border-bottom: 2px solid #edf2f7; padding-bottom: 0.5em; margin-top: 1.5em; }}
            h3 {{ font-size: 1.5em; color: #4a5568; margin-top: 1em; }}
            h4 {{ font-size: 1.25em; color: #2c5282; margin-top: 0.75em; }}
            p {{ margin-bottom: 1em; }}
            .container {{ max-width: 800px; margin: 0 auto; padding: 20px; background-color: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.1); }}
            .executive-summary {{ background-color: #e0f2fe; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #bfdbfe; }}
            .cluster-section {{ border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05); }}
            .cluster-header {{ background-color: #f7fafc; padding: 15px; border-bottom: 1px solid #e2e8f0; border-radius: 8px 8px 0 0; }}
            .parameter-section {{ padding: 15px; border-top: 1px solid #edf2f7; }}
            .sub-parameter-detail {{ background-color: #f9fafb; padding: 12px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #e2e8f0; }}
            table {{ width: 100%; border-collapse: collapse; margin-bottom: 1em; }}
            th, td {{ border: 1px solid #e2e8f0; padding: 8px; text-align: left; }}
            th {{ background-color: #f7fafc; font-weight: 600; }}
            .score-good {{ color: #10b981; font-weight: bold; }}
            .score-moderate {{ color: #fbbf24; font-weight: bold; }}
            .score-not-recommended {{ color: #ef4444; font-weight: bold; }}
            .explanation-text {{ font-size: 0.9em; color: #4a5568; }}
            .assumptions-text {{ font-size: 0.85em; color: #718096; font-style: italic; }}
            .tiny-picture {{ font-size: 2.5em; text-align: center; display: block; margin: 0 auto; }} /* Adjusted for emoji */
            .section-box {{ background-color: #f9fafb; padding: 12px; border-radius: 6px; margin-bottom: 10px; border: 1px solid #e2e8f0; }}
            ol, ul {{ list-style-position: inside; margin-left: 1.5em; }}
            ol li, ul li {{ margin-bottom: 0.5em; }}
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Detailed Project Report: {idea_name} - AI-Powered Consultancy for Academia & Innovation</h1>

            <div class="executive-summary">
                <h2 class="text-xl font-bold text-gray-800 mb-3">Executive Summary</h2>
                <p class="text-gray-700 mb-2">
                    <strong>Idea Name:</strong> <span class="font-semibold">{idea_name}</span>
                </p>
                <p class="text-gray-700 mb-2">
                    <strong>Core Concept:</strong> <span class="italic">{idea_concept}</span>
                </p>
                <p class="text-gray-700 text-lg mb-2">
                    <strong>Overall Viability Score:</strong>{' '}
                    <span class="font-bold text-xl text-blue-700">{overall_score:.2f} / 5.0</span>
                </p>
                <p class="text-gray-700 text-lg">
                    <strong>Validation Outcome:</strong>{' '}
                    <span class="font-bold text-xl text-{outcome_color}-600">
                        {validation_outcome}
                    </span>
                </p>
                <p class="text-gray-700 mt-3">
                    <strong>Primary Recommendation:</strong>{' '}
                    <span class="font-medium">{recommendation_text}</span>
                </p>
                <p class="text-gray-600 text-sm mt-4">
                    Report Generated On: {current_date}
                </p>
            </div>

            <h2>2.0 Introduction</h2>
            <p>The Indian academic and innovation landscape is burgeoning, characterized by a rapidly expanding student population, increasing research output, and a vibrant startup ecosystem. Despite this growth, significant challenges persist: students struggle with project guidance, researchers face hurdles in securing funding and publishing, and innovators often lack strategic direction and intellectual property (IP) protection. Traditional consultancy services are often expensive, inaccessible, or lack the scalability to address these widespread needs.</p>
            <p>"{idea_name}" (Pragati, meaning 'Progress' in Sanskrit) is conceived as a transformative solution. By leveraging advanced Artificial Intelligence, it seeks to democratize access to high-quality, personalized consultancy. This service aims to empower individuals and institutions by providing intelligent guidance on research methodologies, innovation pathways, project development, career planning, and strategic insights, fostering a culture of continuous progress and excellence. This report serves as a foundational document, detailing the project's scope, operational model, and a rigorous assessment of its potential.</p>
            <p>Our methodology employs a structured, multi-layered scoring system designed to provide a quantifiable and qualitative evaluation. Each aspect of the idea is meticulously examined, scored, and contextualized, leading to an overall viability assessment and actionable recommendations for the path forward.</p>

            <h2>3.0 Methodology: The Validation Compass</h2>
            <p>Our validation framework is built upon a hierarchical structure of Clusters, Parameters, and Sub-Parameters, each assigned a specific weight to reflect its relative importance. This ensures a balanced and comprehensive evaluation.</p>

            <h3>3.1 Scoring Rubric</h3>
            <p>Each sub-parameter is scored on a scale of 1 to 5, reflecting its alignment with success factors:</p>
            <table>
                <thead>
                    <tr>
                        <th>Score</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>5</strong></td><td><strong>Excellent:</strong> Strong evidence, highly aligned with success factors, minimal risk, clear advantage.</td></tr>
                    <tr><td><strong>4</strong></td><td><strong>Good:</strong> Positive evidence, generally aligned, minor areas for improvement/risk.</td></tr>
                    <tr><td><strong>3</strong></td><td><strong>Moderate:</strong> Mixed evidence, some clear challenges/risks, requires attention.</td></tr>
                    <tr><td><strong>2</strong></td><td><strong>Weak:</strong> Significant gaps, major challenges/risks, requires substantial rework.</td></tr>
                    <tr><td><strong>1</strong></td><td><strong>Poor:</strong> No evidence, fundamental flaws, highly problematic, major red flags.</td></tr>
                    <tr><td><strong>N/A</strong></td><td><strong>Not Applicable:</strong> (e.g., patentability for a service business without IP). This won't contribute to the score but will be noted.</td></tr>
                </tbody>
            </table>

            <h3>3.2 Weightage Structure</h3>
            <p>Weights are crucial for reflecting relative importance. These weights sum to 100% within their parent category.</p>
            <h4>A. Cluster Weightage (Total 100%)</h4>
            <table>
                <thead>
                    <tr>
                        <th>Cluster #</th>
                        <th>Cluster Name</th>
                        <th>Suggested Weightage</th>
                        <th>Rationale</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>Core Idea & Innovation</td><td>20%</td><td>Foundation of the idea, problem-solution fit is paramount.</td></tr>
                    <tr><td>2</td><td>Market & Commercial Opportunity</td><td>25%</td><td>Highest Weightage: A great idea in a non-existent market is useless. Market validation is critical.</td></tr>
                    <tr><td>3</td><td>Execution & Operations</td><td>15%</td><td>Ability to build and deliver; essential for practical implementation.</td></tr>
                    <tr><td>4</td><td>Business Model & Strategy</td><td>15%</td><td>How the idea makes money and sustains itself; crucial for commercial success.</td></tr>
                    <tr><td>5</td><td>Team & Organizational Health</td><td>10%</td><td>Strong team can pivot and overcome challenges; weak team can sink good ideas.</td></tr>
                    <tr><td>6</td><td>External Environment & Compliance</td><td>10%</td><td>Non-negotiable for operating; major showstoppers if not addressed.</td></tr>
                    <tr><td>7</td><td>Risk & Future Outlook</td><td>5%</td><td>Forward-looking, identifies potential roadblocks, important for investor appeal.</td></tr>
                    <tr><td><strong>Total</strong></td><td></td><td><strong>100%</strong></td><td></td></tr>
                </tbody>
            </table>

            <h4>B. Parameter Weightage (Within Each Cluster - Sums to 100% for its cluster)</h4>
            <p>Example: <strong>Cluster 1: Core Idea & Innovation (20% of Total)</strong></p>
            <table>
                <thead>
                    <tr>
                        <th>Parameter #</th>
                        <th>Parameter Name</th>
                        <th>Suggested Weightage (within cluster)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1.1</td><td>Novelty & Uniqueness</td><td>30%</td></tr>
                    <tr><td>1.2</td><td>Problem-Solution Fit & Market Need</td><td>45%</td></tr>
                    <tr><td>1.3</td><td>User Experience (UX) & Usability Potential</td><td>25%</td></tr>
                    <tr><td><strong>Total</strong></td><td></td><td><strong>100%</strong></td></tr>
                </tbody>
            </table>

            <h4>C. Sub-Parameter Weightage (Within Each Parameter - Sums to 100% for its parameter)</h4>
            <p>Example: <strong>Parameter 1.2: Problem-Solution Fit & Market Need (45% of Cluster 1)</strong></p>
            <table>
                <thead>
                    <tr>
                        <th>Sub-Parameter</th>
                        <th>Suggested Weightage (within parameter)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Problem Clarity & Severity</td><td>20%</td></tr>
                    <tr><td>Target Audience Identification & Definition</td><td>15%</td></tr>
                    <tr><td>Customer Pain Points Validation</td><td>20%</td></tr>
                    <tr><td>Solution Efficacy</td><td>20%</td></tr>
                    <tr><td>Customer Willingness to Pay</td><td>15%</td></tr>
                    <tr><td>Jobs-to-Be-Done (JTBD) Alignment</td><td>10%</td></tr>
                    <tr><td><strong>Total</strong></td><td><strong>100%</strong></td></tr>
                </tbody>
            </table>

            <h3>3.3 Scoring Calculation Flow (Weighted Average)</h3>
            <p>The overall viability score is derived through a weighted average calculation:</p>
            <ol>
                <li><strong>Sub-Parameter Score:</strong> AI assigns a score (1-5) to each sub-parameter based on analysis of the innovator's input and its knowledge base.</li>
                <li><strong>Weighted Sub-Parameter Contribution:</strong>
                    <ul>
                        <li><code>Contribution = (Assigned Score / 5) * (Sub-Parameter Weight) * (Parameter Weight) * (Cluster Weight) * 5</code></li>
                        <li>This calculation scales the score to its true impact on the final 1-5 overall score.</li>
                    </ul>
                </li>
                <li><strong>Parameter Score:</strong> Sum of (Weighted Sub-parameter Contributions) for all sub-parameters within that parameter. This yields a score between 1 and 5.</li>
                <li><strong>Cluster Score:</strong> Sum of (Weighted Parameter Contributions) for all parameters within that cluster. This yields a score between 1 and 5.</li>
                <li><strong>Overall Viability Score:</strong> Sum of (Weighted Cluster Contributions) for all 7 clusters. This yields a final score between 1 and 5.</li>
            </ol>

            <h3>3.4 Validation Thresholds</h3>
            <p>Once the Overall Viability Score (1-5 scale) is calculated, we map it to the three conditions:</p>
            <table>
                <thead>
                    <tr>
                        <th>Overall Viability Score Range</th>
                        <th>Validation Outcome</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>4.0 - 5.0</td><td><strong>GOOD</strong></td><td>Approved for Next Step (Consultancy): Idea has strong potential, minimal significant red flags. AI provides detailed strengths, minor areas for refinement, and a clear rationale for approval.</td></tr>
                    <tr><td>2.5 - 3.9</td><td><strong>MODERATE</strong></td><td>Requires AI-Guided Modification & Re-upload: Idea has potential but with notable weaknesses or missing information. AI provides specific recommendations for improvement (e.g., "Strengthen your market validation data for India," "Refine your revenue model projections"). Innovator must revise and resubmit for re-evaluation.</td></tr>
                    <tr><td>1.0 - 2.4</td><td><strong>NOT RECOMMENDED</strong></td><td>Idea Not Viable (at this stage): Idea has fundamental flaws or significant unaddressed risks. AI provides a clear, concise explanation of why the idea is not viable, highlighting the major showstoppers (e.g., "No clear problem-solution fit," "Market size is too small," "Significant regulatory hurdles in India").</td></tr>
                </tbody>
            </table>

            <h2>4.0 Detailed Project Analysis</h2>
            <p>Here is the granular breakdown of the scores for each sub-parameter, along with the justification for the assigned score (1-5) based on your rubric, including the underlying assumptions and considerations.</p>
            <p><strong>Max Score for each Sub-Parameter = 5</strong></p>
    """

    for cluster_idx, (cluster_name, cluster_data) in enumerate(sub_parameter_data_evaluated.items()):
        if cluster_name == 'purpose': # Skip the purpose field
            continue
        cluster_purpose = cluster_data.get('purpose', 'Purpose not defined for this cluster.')
        cluster_weight_value = cluster_weights_input.get(cluster_name, 0)

        # Calculate cluster's weighted score for display in the report
        cluster_weighted_score_sum = 0
        valid_sub_params_in_cluster = 0
        for param_name, param_data in cluster_data.items():
            if param_name in ['common_terminologies', 'purpose']:
                continue
            param_weight_value = PARAMETER_WEIGHTS[cluster_name].get(param_name, 0)
            for sub_param_name, sub_param in param_data.items():
                if sub_param_name in ['weight', 'common_terminologies', 'objective', 'analysis_steps', 'methods', 'data_required', 'calculations_metrics', 'assumptions_template', 'example_table', 'recommendations', 'mentor_insights_notes']:
                    continue # Skip static definition fields
                if sub_param['assignedScore'] != 'N/A':
                    cluster_weighted_score_sum += calculate_weighted_score(
                        sub_param['assignedScore'],
                        sub_param['weight'],
                        param_weight_value,
                        cluster_weight_value
                    )
                    valid_sub_params_in_cluster += 1
        
        # Scale the sum back to a 1-5 score for the cluster
        # This is a simplified average for display, considering all sub-parameters contribute
        cluster_score_display = (cluster_weighted_score_sum / (cluster_weight_value * 5)) if (cluster_weight_value * 5) > 0 else 0


        html_report += f"""
            <div class="cluster-section">
                <div class="cluster-header">
                    <h3 class="text-lg font-semibold text-gray-800">{cluster_idx + 1}. Cluster: {cluster_name} (Overall Weight: {cluster_weight_value * 100:.0f}%)</h3>
                    <p class="text-md font-semibold text-gray-700">Purpose: {cluster_purpose}</p>
                    <p class="text-md font-semibold text-gray-700">Cluster Score (Weighted Average): <span class="text-blue-600">{cluster_score_display:.2f} / 5.0</span></p>
                </div>
                <div class="parameter-section">
        """
        for param_idx, (param_name, param_data) in enumerate(cluster_data.items()):
            if param_name in ['common_terminologies', 'purpose']:
                continue
            param_common_terminologies = param_data.get('common_terminologies', 'N/A')
            param_weight_value = PARAMETER_WEIGHTS[cluster_name].get(param_name, 0)

            # Calculate parameter's average score for display
            sub_params_in_param = [s for k, s in param_data.items() if k not in ['weight', 'common_terminologies', 'objective', 'analysis_steps', 'methods', 'data_required', 'calculations_metrics', 'assumptions_template', 'example_table', 'recommendations', 'mentor_insights_notes'] and s['assignedScore'] != 'N/A']
            param_score_display = sum(s['assignedScore'] for s in sub_params_in_param) / len(sub_params_in_param) if len(sub_params_in_param) > 0 else 0

            html_report += f"""
                <div style="border: 1px solid #e2e8f0; border-radius: 6px; margin-bottom: 15px; background-color: #ffffff;">
                    <div style="background-color: #f0f4f8; padding: 12px; border-bottom: 1px solid #e2e8f0; border-radius: 6px 6px 0 0;">
                        <h4 style="font-size: 1.1em; font-weight: 600; color: #2c5282;">{cluster_idx + 1}.{param_idx + 1} Parameter: {param_name} (Weight: {param_weight_value * 100:.0f}%)</h4>
                        <p style="font-weight: 500; color: #4a5568;">Common Terminologies: {param_common_terminologies}</p>
                        <p style="font-weight: 500; color: #4a5568;">Parameter Score (Average): <span style="color: #5a67d8;">{param_score_display:.2f} / 5.0</span></p>
                    </div>
                    <div style="padding: 12px;">
            """
            for sub_param_idx, (sub_param_name, sub_param) in enumerate(param_data.items()):
                if sub_param_name in ['weight', 'common_terminologies', 'objective', 'analysis_steps', 'methods', 'data_required', 'calculations_metrics', 'assumptions_template', 'example_table', 'recommendations', 'mentor_insights_notes']:
                    continue # Skip static definition fields

                weighted_contribution = calculate_weighted_score(
                    sub_param['assignedScore'],
                    sub_param['weight'],
                    param_weight_value,
                    cluster_weight_value
                )
                
                # Get static details for the sub-parameter from SUB_PARAMETER_DEFINITIONS
                static_sub_param_details = SUB_PARAMETER_DEFINITIONS[cluster_name][param_name][sub_param_name]

                # Format analysis steps
                analysis_steps_html = ""
                if 'analysis_steps' in static_sub_param_details and static_sub_param_details['analysis_steps']:
                    analysis_steps_html = "<ul>" + "".join([f"<li>{step}</li>" for step in static_sub_param_details['analysis_steps']]) + "</ul>"
                else:
                    analysis_steps_html = "<p><i>Analysis steps not explicitly defined in template.</i></p>"

                # Format methods/principles
                methods_html = f"<p>{static_sub_param_details.get('methods', '<i>Methods/Principles not explicitly defined in template.</i>')}</p>"

                # Format data required & sources
                data_required_html = f"<p>{static_sub_param_details.get('data_required', '<i>Data required & sources not explicitly defined in template.</i>')}</p>"

                # Format calculations/metrics
                calculations_metrics_html = ""
                if 'calculations_metrics' in static_sub_param_details and static_sub_param_details['calculations_metrics']:
                    calculations_metrics_html = "<ul>" + "".join([f"<li>{metric}</li>" for metric in static_sub_param_details['calculations_metrics']]) + "</ul>"
                else:
                    calculations_metrics_html = "<p><i>Calculations/Metrics not explicitly defined in template.</i></p>"

                # Format assumptions
                assumptions_template_html = ""
                if 'assumptions_template' in static_sub_param_details and static_sub_param_details['assumptions_template']:
                    assumptions_template_html = "<ul>" + "".join([f"<li>{assumption}</li>" for assumption in static_sub_param_details['assumptions_template']]) + "</ul>"
                else:
                    assumptions_template_html = "<p><i>Assumptions not explicitly defined in template.</i></p>"

                # Format example table
                example_table_html = ""
                if 'example_table' in static_sub_param_details and static_sub_param_details['example_table']:
                    table_headers = "".join([f"<th>{h}</th>" for h in static_sub_param_details['example_table']['headers']])
                    table_rows = ""
                    for row in static_sub_param_details['example_table']['rows']:
                        table_rows += "<tr>" + "".join([f"<td>{cell}</td>" for cell in row]) + "</tr>"
                    example_table_html = f"""
                        <h5 style="font-weight: 600; margin-top: 1em;">Example Table: {sub_param_name} Assessment</h5>
                        <table>
                            <thead>
                                <tr>{table_headers}</tr>
                            </thead>
                            <tbody>
                                {table_rows}
                            </tbody>
                        </table>
                    """
                else:
                    example_table_html = "<p><i>Example table not explicitly defined in template.</i></p>"

                # Determine recommendation based on score
                recommendation_text_sub = ""
                if sub_param['assignedScore'] >= 4:
                    recommendation_text_sub = static_sub_param_details['recommendations'].get('high', 'No specific "high" recommendation provided.')
                elif sub_param['assignedScore'] <= 2:
                    recommendation_text_sub = static_sub_param_details['recommendations'].get('low', 'No specific "low" recommendation provided.')
                else:
                    recommendation_text_sub = "This area shows moderate strength; review the explanation for specific considerations."

                mentor_insights_notes = static_sub_param_details.get('mentor_insights_notes', '[Space for mentor\'s qualitative observations.]')


                html_report += f"""
                            <div class="sub-parameter-detail">
                                <h4 style="font-weight: 600; color: #2d3748;">{cluster_idx + 1}.{param_idx + 1}.{sub_param_idx + 1 if sub_param_idx is not None else ''} {sub_param_name}</h4>
                                <p style="font-size: 0.9em; color: #4a5568;"><strong>Sub-Parameter Weight:</strong> {sub_param['weight'] * 100:.0f}% (of Parameter)</p>
                                <p style="font-size: 0.9em; color: #4a5568;"><strong>Common Terminologies:</strong> {static_sub_param_details.get('common_terminologies', 'N/A')}</p>
                                <p style="font-size: 0.9em; color: #4a5568;"><strong>Objective:</strong> {static_sub_param_details.get('objective', 'N/A')}</p>

                                <div class="section-box">
                                    <h5 style="font-weight: 600;">Analysis Steps:</h5>
                                    {analysis_steps_html}
                                </div>
                                <div class="section-box">
                                    <h5 style="font-weight: 600;">Methods/Principles:</h5>
                                    {methods_html}
                                </div>
                                <div class="section-box">
                                    <h5 style="font-weight: 600;">Data Required & Sources:</h5>
                                    {data_required_html}
                                </div>
                                <div class="section-box">
                                    <h5 style="font-weight: 600;">Calculations/Metrics:</h5>
                                    {calculations_metrics_html}
                                </div>
                                <div class="section-box">
                                    <h5 style="font-weight: 600;">Assumptions:</h5>
                                    {assumptions_template_html}
                                </div>

                                {example_table_html}

                                <p style="font-size: 1.1em; font-weight: bold; color: #2d3748; margin-top: 1em;">
                                    Assigned Score: <span style="color: {get_outcome_color(get_validation_outcome(sub_param['assignedScore']))};">{sub_param['assignedScore']} / 5</span>
                                    <span class="tiny-picture">💡</span>
                                </p>
                                <p class="explanation-text"><strong>Explanation:</strong> {sub_param['explanation']}</p>
                                <p class="assumptions-text"><strong>AI Assumptions & Considerations:</strong> {sub_param['assumptions']}</p>

                                <h5 style="font-weight: 600; margin-top: 1em;">Recommendations:</h5>
                                <p style="font-size: 0.9em; color: #4a5568;">{recommendation_text_sub}</p>
                                <h5 style="font-weight: 600; margin-top: 1em;">Mentor's Insights/Notes:</h5>
                                <p style="font-size: 0.9em; color: #718096; font-style: italic;">{mentor_insights_notes}</p>
                            </div>
                """
            html_report += """
                    </div>
                </div>
            """
        html_report += """
                </div>
            </div>
        """

    html_report += f"""
            <h2>5.0 Conclusion</h2>
            <p>{idea_name} presents a compelling vision for leveraging AI to serve the critical needs of India's academic and innovation sectors. Its core idea demonstrates good originality and targets clear problems within a vast market. The inherent scalability of an AI-powered service offers significant operational and business model advantages.</p>
            <p>However, the detailed assessment reveals that {idea_name} currently stands at a <strong>"{validation_outcome}" viability level (Overall Score: {overall_score:.2f}/5.0)</strong>. The primary challenges lie in the complexities of proving AI efficacy for nuanced consultancy, navigating the evolving regulatory landscape (especially data privacy and sector-specific compliance in India), and precisely defining the initial target audience to ensure deep product-market fit. These areas, if not proactively addressed, pose significant risks to successful implementation and sustained growth.</p>
            <p>Despite these challenges, the strong alignment with national policies and the inherent social impact provide a solid foundation. With strategic adjustments and focused efforts on the identified areas, {idea_name} has the potential to evolve into a highly viable and impactful venture.</p>

            <h2>6.0 Recommendations</h2>
            <p>To elevate {idea_name}'s viability and transition from "MODERATE" to "GOOD" status, the following strategic recommendations are crucial:</p>
            <ol>
                <li><strong>Niche Down and Validate Deeply (Core Idea & Market Opportunity):</strong>
                    <ul>
                        <li><strong>Recommendation:</strong> Instead of broadly targeting all academic and innovation stakeholders, identify and focus on <strong>1-2 specific, high-pain niches</strong> for the initial launch. For example:</li>
                        <li>"Final-year engineering students struggling with complex project design and documentation."</li>
                        <li>"Early-career university professors seeking guidance on grant application writing and research methodology."</li>
                        <li><strong>Why:</strong> This allows for a hyper-focused problem validation, enables the development of a truly effective AI solution tailored to that specific need, and clarifies the willingness to pay within a defined segment. It also simplifies initial AI training, data acquisition, and regulatory navigation.</li>
                        <li><strong>Action:</strong> Conduct in-depth qualitative research (interviews, focus groups) with representatives from the chosen niche to understand their most pressing needs, current solutions, and specific trust factors for AI-driven advice.</li>
                    </ul>
                </li>
                <li><strong>Prove AI Efficacy & Build Trust (Core Idea & Product-Market Fit):</strong>
                    <ul>
                        <li><strong>Recommendation:</strong> Develop and execute a robust pilot program with the identified niche to rigorously demonstrate the AI\'s ability to provide <em>actionable, high-quality consultancy</em> that genuinely leads to measurable "Pragati" (progress).</li>
                        <li><strong>Why:</strong> The biggest hurdle for an AI consultant is building user trust and proving its effectiveness for complex, nuanced tasks.</li>
                        <li><strong>Action:</strong> Implement a pilot with clear success metrics (e.g., "X% reduction in research time," "Y% increase in grant application success rate," "Z% improvement in project quality"). Actively gather testimonials and quantifiable outcomes. Consider a "human-in-the-loop" model for high-stakes advice initially to build confidence and continuously refine the AI\'s capabilities.</li>
                    </ul>
                </li>
                <li><strong>Proactive Regulatory & Data Governance Strategy (External Environment & Compliance):</strong>
                    <ul>
                        <li><strong>Recommendation:</strong> Prioritize the development of a comprehensive legal and compliance strategy from day one, specifically addressing data privacy (India\'s DPDP Bill) and sector-specific regulations relevant to educational data, research data, and AI-driven services in India.</li>
                        <li><strong>Why:</strong> This is a critical risk area. Handling sensitive academic and research data requires impeccable compliance. Ambiguity or non-adherence can lead to severe legal penalties, reputational damage, and erode user trust.</li>
                        <li><strong>Action:</strong> Engage legal counsel specializing in Indian data privacy and EdTech/AI regulations. Develop robust data governance policies, clear consent mechanisms, and strong security protocols <em>before</em> scaling. Explore regulatory sandbox environments or proactive engagement with relevant regulatory bodies (e.g., UGC, MeitY) if applicable.</li>
                    </ul>
                </li>
                <li><strong>Refine Monetization and Defensibility (Business Model & Strategy):</strong>
                    <ul>
                        <li><strong>Recommendation:</strong> Clearly articulate the specific pricing model for the chosen niche and how it will generate sustainable revenue, ensuring it aligns with the perceived value and user budget constraints. Simultaneously, develop a stronger defensibility strategy beyond just the core AI.</li>
                        <li><strong>Why:</strong> While AI offers inherent scalability, the path to profitability needs clarity, especially given initial development costs. Defensibility protects the venture from future competition.</li>
                        <li><strong>Action:</strong> Explore tiered pricing models (e.g., freemium, premium subscriptions for individuals, institutional licenses for colleges). Identify unique data assets (e.g., proprietary datasets of Indian academic challenges), specialized AI training methodologies, or strong community building around the platform as additional competitive moats.</li>
                    </ul>
                </li>
                <li><strong>Strategic Team Augmentation (Team & Organizational Health):</strong>
                    <ul>
                        <li><strong>Recommendation:</strong> Ensure the core founding team or advisory board includes explicit expertise in AI ethics, responsible AI development, and deep domain knowledge specific to the chosen niche(s).</li>
                        <li><strong>Why:</strong> To build an AI that is not only technically capable but also ethically sound, unbiased, and truly understands the nuanced needs and contexts of its users in the academic and innovation fields.</li>
                        <li><strong>Action:</strong> Actively seek advisors or early hires with strong backgrounds in AI ethics, educational psychology, specific research methodologies, or intellectual property law to guide the AI\'s development, content generation, and ethical deployment.</li>
                    </ul>
                </li>
            </ol>

            <h2>7.0 Appendix / Glossary</h2>
            <ul>
                <li><strong>Key Terms:</strong> Definitions of specialized terms used in the report (e.g., TAM, SAM, SOM, TRL, DPDP Act).</li>
                <li><strong>Data Sources:</strong> A comprehensive list of all data sources consulted (e.g., specific government reports, market research firms).</li>
                <li><strong>Mentor's Contact:</strong> [Mentor's Name/Contact Information]</li>
            </ul>
            <p><strong>Disclaimer:</strong> This template provides a structured framework for idea validation. The accuracy and depth of the assessment are directly dependent on the quality and completeness of the data provided by the innovator and the diligence of the mentor/AI in applying the methodologies. All financial projections and market estimations are inherently forward-looking and subject to change.</p>
        </div>
    </body>
    </html>
    """
    return html_report

# --- Main Validation Function for Backend ---
def validate_idea(idea_name, idea_concept, validation_purpose, custom_cluster_weights_input=None):
    """
    Main function to perform AI-driven idea validation.
    Args:
        idea_name (str): The name of the idea.
        idea_concept (str): A detailed description of the idea concept.
        validation_purpose (str): The purpose of the validation (e.g., "Market Fit").
        custom_cluster_weights_input (dict, optional): Custom weights for clusters.
                                                      If None, default CLUSTER_WEIGHTS are used.
                                                      Values should be percentages (e.g., 20 for 20%).
    Returns:
        dict: A dictionary containing:
              - 'overall_score': The calculated overall viability score.
              - 'validation_outcome': The determined validation outcome ('GOOD', 'MODERATE', 'NOT RECOMMENDED').
              - 'evaluated_data': A detailed dictionary of all sub-parameters with AI scores, explanations, and assumptions.
              - 'html_report': The full HTML report string.
              - 'error': Error message if validation fails, None otherwise.
    """
    if not idea_name or not idea_concept:
        return {
            'overall_score': 0,
            'validation_outcome': 'N/A',
            'evaluated_data': {},
            'html_report': '',
            'error': 'Idea name and concept cannot be empty.'
        }

    # Use custom weights if provided, otherwise use defaults
    if custom_cluster_weights_input:
        # Convert custom weights from percentages (e.g., 20) to decimals (0.20)
        calculated_cluster_weights = {k: v / 100 for k, v in custom_cluster_weights_input.items()}
        # Validate that custom weights sum to 100
        if sum(custom_cluster_weights_input.values()) != 100:
             return {
                'overall_score': 0,
                'validation_outcome': 'N/A',
                'evaluated_data': {},
                'html_report': '',
                'error': 'Custom cluster weights must sum to 100%.'
            }
    else:
        calculated_cluster_weights = CLUSTER_WEIGHTS

    # Deep copy the definitions to store AI-generated data
    # We need to ensure the structure for evaluated_data matches the SUB_PARAMETER_DEFINITIONS
    # but only for the parts that hold AI-generated scores.
    evaluated_sub_parameter_data = json.loads(json.dumps(SUB_PARAMETER_DEFINITIONS))

    # Iterate through each sub-parameter and call Gemini API
    # Only iterate over the actual evaluation points, not the static descriptive fields
    for cluster_name, cluster_content in SUB_PARAMETER_DEFINITIONS.items():
        if cluster_name == 'purpose':
            continue
        for param_name, param_content in cluster_content.items():
            if param_name in ['common_terminologies', 'purpose']:
                continue
            for sub_param_name, sub_param_details in param_content.items():
                if sub_param_name in ['weight', 'common_terminologies', 'objective', 'analysis_steps', 'methods', 'data_required', 'calculations_metrics', 'assumptions_template', 'example_table', 'recommendations', 'mentor_insights_notes']:
                    continue # Skip static definition fields

                print(f"Evaluating: {cluster_name} > {param_name} > {sub_param_name}...") # For backend logging

                ai_response = get_ai_evaluation(
                    idea_name,
                    idea_concept,
                    cluster_name,
                    param_name,
                    sub_param_name,
                    sub_param_details
                )

                # Store the AI-generated data directly into the deep-copied structure
                evaluated_sub_parameter_data[cluster_name][param_name][sub_param_name]['assignedScore'] = ai_response['assignedScore']
                evaluated_sub_parameter_data[cluster_name][param_name][sub_param_name]['explanation'] = ai_response['explanation']
                evaluated_sub_parameter_data[cluster_name][param_name][sub_param_name]['assumptions'] = ai_response['assumptions']

    overall_score = calculate_overall_score(evaluated_sub_parameter_data, calculated_cluster_weights)
    validation_outcome = get_validation_outcome(float(overall_score))

    html_report = generate_report_html(
        idea_name, idea_concept, overall_score, validation_outcome,
        evaluated_sub_parameter_data, calculated_cluster_weights
    )

    return {
        'overall_score': overall_score,
        'validation_outcome': validation_outcome,
        'evaluated_data': evaluated_sub_parameter_data,
        'html_report': html_report,
        'error': None
    }

# Example usage (for testing the backend logic directly)
if __name__ == "__main__":
    # This block will only run if the script is executed directly, not when imported.
    # It demonstrates how the `validate_idea` function would be called from a frontend/API.

    print("--- Running Idea Validation Backend Example ---")

    test_idea_name = "Pragati AI"
    test_idea_concept = "An innovative AI-powered consultancy service targeting the academic and innovation ecosystem across India, aiming to bridge critical gaps in guidance, research support, and innovation pathways for colleges, students, innovators, and professors."
    test_validation_purpose = "General Viability"

    # Example with default weights
    print("\n--- Validating with Default Weights ---")
    result_default = validate_idea(test_idea_name, test_idea_concept, test_validation_purpose)

    if result_default['error']:
        print(f"Error: {result_default['error']}")
    else:
        print(f"\nOverall Score: {result_default['overall_score']:.2f}")
        print(f"Validation Outcome: {result_default['validation_outcome']}")
        # You can save the HTML report to a file to view it
        with open("pragati_idea_report_default.html", "w", encoding="utf-8") as f:
            f.write(result_default['html_report'])
        print("Detailed report saved to pragati_idea_report_default.html")

    # Example with custom weights (summing to 100)
    print("\n--- Validating with Custom Weights (Balanced) ---")
    custom_weights_example = {
        'Core Idea & Innovation': 20,
        'Market & Commercial Opportunity': 25,
        'Execution & Operations': 15,
        'Business Model & Strategy': 15,
        'Team & Organizational Health': 10,
        'External Environment & Compliance': 10,
        'Risk & Future Outlook': 5,
    }
    result_custom = validate_idea(test_idea_name, test_idea_concept, test_validation_purpose, custom_weights_example)

    if result_custom['error']:
        print(f"Error: {result_custom['error']}")
    else:
        print(f"\nOverall Score (Custom Weights): {result_custom['overall_score']:.2f}")
        print(f"Validation Outcome (Custom Weights): {result_custom['validation_outcome']}")
        with open("pragati_idea_report_custom.html", "w", encoding="utf-8") as f:
            f.write(result_custom['html_report'])
        print("Detailed report saved to pragati_idea_report_custom.html")

    # Example with invalid custom weights (for error testing)
    print("\n--- Validating with Invalid Custom Weights (Should error) ---")
    invalid_custom_weights = {
        'Core Idea & Innovation': 20,
        'Market & Commercial Opportunity': 20, # Changed from 25
        'Execution & Operations': 15,
        'Business Model & Strategy': 15,
        'Team & Organizational Health': 10,
        'External Environment & Compliance': 10,
        'Risk & Future Outlook': 5,
    } # Sums to 95
    result_invalid = validate_idea(test_idea_name, test_idea_concept, test_validation_purpose, invalid_custom_weights)
    if result_invalid['error']:
        print(f"Error: {result_invalid['error']}")
    else:
        print("Unexpected success for invalid weights.")
